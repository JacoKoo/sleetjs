!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.sleet={})}(this,function(t){"use strict";var c,e,l=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};(e=c||(c={}))[e.Declaration=0]="Declaration",e[e.Tag=1]="Tag",e[e.TagExtra=2]="TagExtra",e[e.AttributeGroup=3]="AttributeGroup",e[e.Attribute=4]="Attribute",e[e.Setting=5]="Setting",e[e.StringValue=6]="StringValue",e[e.BooleanValue=7]="BooleanValue",e[e.NumberValue=8]="NumberValue",e[e.NullValue=9]="NullValue",e[e.IdentifierValue=10]="IdentifierValue",e[e.CompareOperator=11]="CompareOperator",e[e.Transformer=12]="Transformer",e[e.TransformValue=13]="TransformValue",e[e.Helper=14]="Helper",e[e.HelperAttribute=15]="HelperAttribute",e[e.StaticText=16]="StaticText",e[e.DynamicText=17]="DynamicText";var n=function(){function n(t,e){l(this,n),this._type=t,this._location=e}return r(n,[{key:"type",get:function(){return this._type}},{key:"location",get:function(){return this._location}}]),n}(),u=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,n));return r._name=t,r}return o(u,n),r(u,[{key:"name",get:function(){return this._name}}]),u}(),s=function(t){function e(){return l(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,u),e}(),f=function(t){function e(){return l(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,u),e}(),i=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,n));return r._value=t,r}return o(u,n),r(u,[{key:"toHTMLString",value:function(){return this._value+""}},{key:"value",get:function(){return this._value}}]),u}(),a=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.StringValue,e))}return o(n,i),r(n,[{key:"toHTMLString",value:function(){return'"'+this._value.replace(/"/g,'\\"')+'"'}}]),n}(),p=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.BooleanValue,e))}return o(n,i),n}(),_=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.NumberValue,e))}return o(n,i),n}(),g=function(t){function e(t){return l(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,null,c.NullValue,t))}return o(e,i),e}(),v=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.IdentifierValue,e))}return o(n,i),n}(),d=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.CompareOperator,e))}return o(n,i),n}(),A=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.Transformer,n));return r._params=e||[],r}return o(u,s),r(u,[{key:"toHTMLString",value:function(){return this.name+"("+this._params.map(function(t){return t.toHTMLString()}).join(" ")+")"}},{key:"params",get:function(){return this._params}}]),u}(),y=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.TransformValue,n));return r._transformers=e||[],r}return o(u,i),r(u,[{key:"toHTMLString",value:function(){return""+this._value.toHTMLString()+this._transformers.map(function(t){return" | "+t.toHTMLString()}).join("")}},{key:"transformers",get:function(){return this._transformers}}]),u}(),b=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.HelperAttribute,n));return r._value=e,r}return o(u,f),r(u,[{key:"toHTMLString",value:function(){return(this.name?this.name+"=":"")+this.value.toHTMLString()}},{key:"value",get:function(){return this._value}}]),u}(),C=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.Helper,n));return r._attributes=e||[],r}return o(u,f),r(u,[{key:"toHTMLString",value:function(){return(this.name?this.name:"")+"("+this._attributes.map(function(t){return t.toHTMLString()}).join(" ")+")"}},{key:"attributes",get:function(){return this._attributes}}]),u}(),m=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.StaticText,e))}return o(n,i),r(n,[{key:"_merge",value:function(t){var e={start:this._location.start,end:t._location.end};this._value+=t._value,this._location=e}},{key:"toHTMLString",value:function(){return this.value}}]),n}(),T=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.DynamicText,e))}return o(n,i),r(n,[{key:"toHTMLString",value:function(){return"$"+this.value.toHTMLString()}}]),n}(),k=function(t){function i(t,e,n,r){l(this,i);var u=h(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,null===e?void 0:e,c.Attribute,r));return u._values=n||[],u._namespace=null===t?void 0:t,u}return o(i,f),r(i,[{key:"merge",value:function(t){return!(!this.name||this.name!==t.name||this.namespace!==t.namespace)&&(this._values=this._values.concat(t._values),!0)}},{key:"values",get:function(){return this._values}},{key:"namespace",get:function(){return this._namespace}}]),i}(),x=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.Setting,n));return r._attributes=e||[],r}return o(u,s),r(u,[{key:"attributes",get:function(){return this._attributes}}]),u}(),O=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,c.AttributeGroup,n));return r._setting=e,r._setAttributes(t||[]),r}return o(u,n),r(u,[{key:"_setAttributes",value:function(t){for(var r=t,u=0,e=function(){var n=r;r=[],n.forEach(function(t,e){e<=u?r.push(t):n[u].merge(t)||r.push(t)}),u++};u<r.length;)e();this._attributes=r}},{key:"merge",value:function(t){if(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1])&&(t._setting||this._setting))return!1;var e={start:this._location.start,end:t._location.end};return this._setAttributes(this._attributes.concat(t._attributes)),this._location=e,!0}},{key:"attributes",get:function(){return this._attributes}},{key:"setting",get:function(){return this._setting}}]),u}(),w=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.TagExtra,n));return r._values=e||[],r}return o(u,s),r(u,[{key:"values",get:function(){return this._values}}]),u}(),S=function(t){function a(t,e,n,r,u,i,o,s){l(this,a);var f=h(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,c.Tag,s));return f._children=[],f._text=[],f._indent=t,f._namespace=n,f._dots=r||[],f._hash=u,f._extra=o,f._setGroup(i||[]),f}return o(a,f),r(a,[{key:"_setChildren",value:function(t){this._children=t}},{key:"_setText",value:function(t){this._text=(t||[]).map(function(t){return t.reduce(function(t,e){if(!t.length)return[e];if(e.type===c.DynamicText)return t.concat(e);var n=t[t.length-1];return e.type===c.StaticText&&n.type===c.StaticText?(n._merge(e),t):t.concat(e)},[])})}},{key:"_setGroup",value:function(t){this._attributeGroups=t.reduce(function(t,e){return t.length?t[t.length-1].merge(e)?t:t.concat(e):[e]},[])}},{key:"indent",get:function(){return this._indent}},{key:"dots",get:function(){return this._dots}},{key:"hash",get:function(){return this._hash}},{key:"namespace",get:function(){return this._namespace}},{key:"children",get:function(){return this._children}},{key:"attributeGroups",get:function(){return this._attributeGroups}},{key:"extra",get:function(){return this._extra}},{key:"parent",get:function(){return this._parent}},{key:"text",get:function(){return this._text}}]),a}(),j=function(t){function i(t,e,n,r){l(this,i);var u=h(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,c.Declaration,r));return u._options={},u._extension=e,n.forEach(function(t){return u._options[t.key]=t.value}),u}return o(i,s),r(i,[{key:"option",value:function(t){return this._options[t]}},{key:"extension",get:function(){return this._extension}}]),i}(),V=Object.freeze({get NodeType(){return c},SleetNode:n,SleetValue:i,StringValue:a,BooleanValue:p,NumberValue:_,NullValue:g,IdentifierValue:v,CompareOperatorValue:d,Transformer:A,TransformValue:y,HelperAttribute:b,Helper:C,StaticText:m,DynamicText:T,Attribute:k,Setting:x,AttributeGroup:O,TagExtra:w,Tag:S,Declaration:j});function pu(t,e,n,r){this.message=t,this.expected=e,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,pu)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(pu,Error),pu.buildMessage=function(t,e){var n,i={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}return"Expected "+function(t){var e,n,r,u=new Array(t.length);for(e=0;e<t.length;e++)u[e]=(r=t[e],i[r.type](r));if(u.sort(),0<u.length){for(n=e=1;e<u.length;e++)u[e-1]!==u[e]&&(u[n]=u[e],n++);u.length=n}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(t)+" but "+((n=e)?'"'+u(n)+'"':"end of input")+" found."};var H=function(d,t){t=void 0!==t?t:{};var e,A={},n={start:_r},r=_r,s=function(t,e){return{nodes:au(e||[]),indent:lu||"",declaration:t}},l="#!",h=fr("#!",!1),p="=",_=fr("=",!1),g=function(t,e){return e},v=function(t,e,n){return n},y=function(t,e,n){return new su.Declaration(t,e,n,sr())},c={type:"any"},b=function(t,e){return{key:t,value:e}},f=function(t,e){return e},a=function(t,e){return e.unshift(t)&&e},o=function(e,t){var n=t.filter(function(t){return t!==e.sibling});return e.sibling||(n=au(n)),e._setChildren(n),ou.pop(),e},C=function(t){return ou.push(t)&&t},i=function(t){return t===fu().indent+1},m=function(t,e){return e},T=/^[:>]/,k=ar([":",">"],!1,!1),x=function(t){return t._indent++,t},O="+",w=fr("+",!1),S=function(t){return(fu().sibling=t)._indent++,t},j=function(t){var e=fu();if("|"===e.name)return e._setText(t),e;var n=new su.Tag(cu,"|",1===t.length?"inline":null,[],null,[],null,sr());return n._setText(t),n},V=function(){cu=0},u=function(t){return cu=t||0},H=function(t,e,n,r,u){return e||0<n.length||r||0<u.length},P=function(t,e,n,r,u,i,o){return new su.Tag(cu,e,t,n.concat(u),r,i,o,sr())},L="|",E=fr("|",!1),M=function(t,e){return new su.Tag(cu,"|",t,[],null,e,null,sr())},I="#",D=fr("#",!1),N=function(){return new su.Tag(cu,"#",null,[],null,[],null,sr())},G=":",$=fr(":",!1),F=function(t){return t},z=".",B=fr(".",!1),Z="@",R=fr("@",!1),q=function(t,e){return new su.TagExtra(t,e,sr())},U="(",Q=fr("(",!1),W=function(t,e){return e},J=")",K=fr(")",!1),X=function(t,e){return e.unshift(t)&&e},Y="..",tt=fr("..",!1),et=function(){return!(hu=0)},nt=function(t){return t},rt=function(){return hu=1,!0},ut=/^[:>+]/,it=ar([":",">","+"],!1,!1),ot=function(t){return[t]},st=function(t,e){return e},ft=function(t,e){return e.unshift(t),e},at=cr("Tag text line"),ct=function(t){return t.length?(null===lu&&(lu=t.indexOf("\t")<0?t:"\t"),t.length>=(cu+hu)*lu.length):0===cu&&0===hu},lt=function(t,e){var n=t.slice((cu+hu)*(lu||"").length);return e.unshift(new su.StaticText(n,sr())),e},ht=function(t){return t},pt=function(t){var e=t.slice((cu+hu)*(lu||"").length);return[new su.StaticText(e,sr())]},_t=cr("Text to end of line"),gt="\\$",vt=fr("\\$",!1),dt=function(t){return"$"+t},At="\\",yt=fr("\\",!1),bt=function(t){return or()},Ct=function(t){return new su.StaticText(t,sr())},mt="$",Tt=fr("$",!1),kt=function(t){return new su.DynamicText(t,sr())},xt=function(t){return t||new su.StaticText("$",sr()),new su.DynamicText(t,sr())},Ot=function(t,e){return e},wt=function(t,e){return new su.AttributeGroup(t,e,sr())},St=function(t,e){return(e||"").length===cu*lu.length},jt=function(t,e,n){return new su.AttributeGroup(t,n,sr())},Vt=function(t,e){return e},Ht=function(t,e){return e.reduce(function(t,e){return t.concat(e)},t)},Pt=function(t){return null===lu&&(lu=t.indexOf("\t")<0?t:"\t"),t.length===(cu+1)*lu.length},Lt=function(t,e){return e},Et=",",Mt=fr(",",!1),It=function(t,e){return e},Dt=cr("Attribute pair"),Nt=function(t,e){return new su.Attribute(t,e,[],sr())},Gt=function(t,e,n){return n},$t=function(t,e,n){return new su.Attribute(t,e,n,sr())},Ft=function(t){return t},zt=function(t){return new su.Attribute(null,null,t,sr())},Bt=cr("Attribute setting"),Zt="&",Rt=fr("&",!1),qt=/^[#a-zA-Z0-9]/,Ut=ar(["#",["a","z"],["A","Z"],["0","9"]],!1,!1),Qt=";",Wt=fr(";",!1),Jt=function(t,e){return e},Kt=function(t,e){return new su.Setting(t,e,sr())},Xt=function(t,e){return e},Yt=cr("Attribute value"),te=function(t,e){return new su.Helper(t,e,sr())},ee=function(t,e){return e},ne=function(t,e){return e.unshift(t),e},re=function(t,e){return new su.HelperAttribute(t,e,sr())},ue=function(t){return new su.HelperAttribute(null,t,sr())},ie=function(t,e){return e},oe=function(t,e){return new su.TransformValue(t,e,sr())},se=function(t,e,n){return n},fe=function(t,e,n){return n.unshift(e),new su.Transformer(t,n,sr())},ae=function(t){return new su.StringValue(t,sr())},ce=function(t){return new su.NumberValue(t,sr())},le=function(t){return new su.BooleanValue(t,sr())},he="null",pe=fr("null",!1),_e=function(){return new su.NullValue(sr())},ge=function(t){return new su.IdentifierValue(t,sr())},ve=/^[.\/]/,de=ar([".","/"],!1,!1),Ae=function(t,e){return new su.IdentifierValue(t+e,sr())},ye=cr("Compare Operator"),be="==",Ce=fr("==",!1),me=">=",Te=fr(">=",!1),ke="<=",xe=fr("<=",!1),Oe=">",we=fr(">",!1),Se="<",je=fr("<",!1),Ve="!=",He=fr("!=",!1),Pe=function(){return new su.CompareOperatorValue(or(),sr())},Le=cr("Blank line"),Ee=cr("Identifier"),Me=/^[a-zA-Z$@_]/,Ie=ar([["a","z"],["A","Z"],"$","@","_"],!1,!1),De=/^[a-zA-Z0-9$_\-]/,Ne=ar([["a","z"],["A","Z"],["0","9"],"$","_","-"],!1,!1),Ge=function(t,e){return t+e},$e=cr("End of line"),Fe="\n",ze=fr("\n",!1),Be="\r",Ze=fr("\r",!1),Re="\r\n",qe=fr("\r\n",!1),Ue=cr("Whitespace"),Qe="\t",We=fr("\t",!1),Je=" ",Ke=fr(" ",!1),Xe="\v",Ye=fr("\v",!1),tn="\f",en=fr("\f",!1),nn=cr("Indents"),rn=function(t){return null===lu&&(lu=t),t.length%lu.length==0},un=function(t){return t.length/lu.length},on=function(t){return null===lu&&(lu="\t"),"\t"===lu},sn=function(t){return t.length},fn=cr("Quoted string"),an='"',cn=fr('"',!1),ln=function(t){return t},hn="'",pn=fr("'",!1),_n=cr("Double quoted string char"),gn=function(){return or()},vn=function(t){return t},dn=cr("Single quoted string char"),An=cr("Escaped char"),yn="0",bn=fr("0",!1),Cn=/^[0-9]/,mn=ar([["0","9"]],!1,!1),Tn=function(){return"\0"},kn=/^[nfrt]/,xn=ar(["n","f","r","t"],!1,!1),On=function(t){return"\\"+t},wn="b",Sn=fr("b",!1),jn=function(){return"\v"},Vn=cr("Boolean"),Hn="true",Pn=fr("true",!1),Ln=function(){return!0},En="false",Mn=fr("false",!1),In=function(){return!1},Dn=cr("Number"),Nn=/^[+\-]/,Gn=ar(["+","-"],!1,!1),$n=function(t,e){return"-"===t?-e:e},Fn="0x",zn=fr("0x",!0),Bn=/^[0-9a-f]/i,Zn=ar([["0","9"],["a","f"]],!1,!0),Rn=function(){return parseInt(or(),16)},qn=/^[0-7]/,Un=ar([["0","7"]],!1,!1),Qn=function(){return parseInt(or(),8)},Wn=function(){return parseFloat(or())},Jn=/^[1-9]/,Kn=ar([["1","9"]],!1,!1),Xn="e",Yn=fr("e",!0),tr=0,er=0,nr=[{line:1,column:1}],rr=0,ur=[],ir=0;if("startRule"in t){if(!(t.startRule in n))throw new Error("Can't start parsing from rule \""+t.startRule+'".');r=n[t.startRule]}function or(){return d.substring(er,tr)}function sr(){return hr(er,tr)}function fr(t,e){return{type:"literal",text:t,ignoreCase:e}}function ar(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function cr(t){return{type:"other",description:t}}function lr(t){var e,n=nr[t];if(n)return n;for(e=t-1;!nr[e];)e--;for(n={line:(n=nr[e]).line,column:n.column};e<t;)10===d.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return nr[t]=n}function hr(t,e){var n=lr(t),r=lr(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function pr(t){tr<rr||(rr<tr&&(rr=tr,ur=[]),ur.push(t))}function _r(){var t,e,n,r,u,i,o;if(t=tr,(e=function(){var t,e,n,r,u,i,o,s,f,a,c;if(t=tr,d.substr(tr,2)===l?(e=l,tr+=2):(e=A,0===ir&&pr(h)),e!==A){for(n=[],r=Kr();r!==A;)n.push(r),r=Kr();if(n!==A)if((r=Wr())!==A){if(u=tr,i=[],(o=Kr())!==A)for(;o!==A;)i.push(o),o=Kr();else i=A;if(i!==A)if((o=Wr())!==A){for(ir++,f=s=tr,a=[],c=Kr();c!==A;)a.push(c),c=Kr();a!==A?(61===d.charCodeAt(tr)?(c=p,tr++):(c=A,0===ir&&pr(_)),c!==A?f=a=[a,c]:(tr=f,f=A)):(tr=f,f=A),ir--,f===A?s=void 0:(tr=s,s=A),s!==A?(er=u,i=g(r,o),u=i):(tr=u,u=A)}else tr=u,u=A;else tr=u,u=A;if(u===A&&(u=null),u!==A){if(i=[],o=tr,s=[],(f=Kr())!==A)for(;f!==A;)s.push(f),f=Kr();else s=A;for(s!==A&&(f=gr())!==A?(er=o,s=v(r,u,f),o=s):(tr=o,o=A);o!==A;){if(i.push(o),o=tr,s=[],(f=Kr())!==A)for(;f!==A;)s.push(f),f=Kr();else s=A;s!==A&&(f=gr())!==A?(er=o,s=v(r,u,f),o=s):(tr=o,o=A)}i!==A&&(o=Jr())!==A?(er=t,e=y(r,u,i),t=e):(tr=t,t=A)}else tr=t,t=A}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;return t}())===A&&(e=null),e!==A){for(n=[],r=Ur();r!==A;)n.push(r),r=Ur();if(n!==A)if((r=function(){var t,e,n,r,u,i;if(t=tr,(e=vr())!==A){for(n=[],r=tr,(u=Ar())!==A&&(i=vr())!==A?(er=r,u=f(e,i),r=u):(tr=r,r=A);r!==A;)n.push(r),r=tr,(u=Ar())!==A&&(i=vr())!==A?(er=r,u=f(e,i),r=u):(tr=r,r=A);n!==A?(er=t,e=a(e,n),t=e):(tr=t,t=A)}else tr=t,t=A;return t}())===A&&(r=null),r!==A){for(u=[],i=Ur();i!==A;)u.push(i),i=Ur();if(u!==A){for(i=[],o=Kr();o!==A;)i.push(o),o=Kr();i!==A?(er=t,t=e=s(e,r)):(tr=t,t=A)}else tr=t,t=A}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;return t}function gr(){var t,e,n,r,u,i,o,s,f,a;if(t=tr,(e=Wr())!==A){for(n=[],r=Kr();r!==A;)n.push(r),r=Kr();if(n!==A)if(61===d.charCodeAt(tr)?(r=p,tr++):(r=A,0===ir&&pr(_)),r!==A){for(u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A){for(o=[],f=s=i=tr,ir++,(a=Kr())===A&&(a=Jr()),ir--,a===A?f=void 0:(tr=f,f=A),f!==A?(d.length>tr?(a=d.charAt(tr),tr++):(a=A,0===ir&&pr(c)),a!==A?s=f=[f,a]:(tr=s,s=A)):(tr=s,s=A);s!==A;)o.push(s),f=s=tr,ir++,(a=Kr())===A&&(a=Jr()),ir--,a===A?f=void 0:(tr=f,f=A),f!==A?(d.length>tr?(a=d.charAt(tr),tr++):(a=A,0===ir&&pr(c)),a!==A?s=f=[f,a]:(tr=s,s=A)):(tr=s,s=A);(i=o!==A?d.substring(i,tr):o)!==A?(er=t,t=e=b(e,i)):(tr=t,t=A)}else tr=t,t=A}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;return t}function vr(){var t,e,n,r,u,i;if(u=t=tr,(i=function(){var t,e,n,r,u,i,o,s,f,a,c,l,h,p,_,g,v;if(t=tr,(e=yr())===A&&(e=null),e!==A)if((n=br())===A&&(n=null),n!==A)if((r=Wr())===A&&(r=null),r!==A){for(u=[],i=Cr();i!==A;)u.push(i),i=Cr();if(u!==A)if(_=tr,35===d.charCodeAt(tr)?(g=I,tr++):(g=A,0===ir&&pr(D)),g!==A&&(v=Wr())!==A?(er=_,g=F(v),_=g):(tr=_,_=A),(i=_)===A&&(i=null),i!==A){for(o=[],s=Cr();s!==A;)o.push(s),s=Cr();o!==A?(er=tr,(s=(s=H(n,r,u,i,o))?void 0:A)!==A?((f=jr())===A&&(f=null),f!==A?(c=tr,64===d.charCodeAt(tr)?(l=Z,tr++):(l=A,0===ir&&pr(R)),l!==A&&(h=Wr())!==A?((p=function(){var t,e,n,r,u,i,o,s;if(t=tr,40===d.charCodeAt(tr)?(e=U,tr++):(e=A,0===ir&&pr(Q)),e!==A){for(n=[],r=Kr();r!==A;)n.push(r),r=Kr();if(n!==A)if((r=mr())!==A){if(u=[],i=tr,o=[],(s=Kr())!==A)for(;s!==A;)o.push(s),s=Kr();else o=A;for(o!==A&&(s=mr())!==A?(er=i,o=W(r,s),i=o):(tr=i,i=A);i!==A;){if(u.push(i),i=tr,o=[],(s=Kr())!==A)for(;s!==A;)o.push(s),s=Kr();else o=A;o!==A&&(s=mr())!==A?(er=i,o=W(r,s),i=o):(tr=i,i=A)}if(u!==A){for(i=[],o=Kr();o!==A;)i.push(o),o=Kr();i!==A?(41===d.charCodeAt(tr)?(o=J,tr++):(o=A,0===ir&&pr(K)),o!==A?(er=t,e=X(r,u),t=e):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;return t}())===A&&(p=null),p!==A?(er=c,l=q(h,p),c=l):(tr=c,c=A)):(tr=c,c=A),(a=c)===A&&(a=null),a!==A?(er=t,e=P(n,r,u,i,o,f,a),t=e):(tr=t,t=A)):(tr=t,t=A)):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;else tr=t,t=A;else tr=t,t=A;return t===A&&(t=tr,(e=br())===A&&(e=null),e!==A?(124===d.charCodeAt(tr)?(n=L,tr++):(n=A,0===ir&&pr(E)),n!==A?((r=jr())===A&&(r=null),r!==A?(er=t,e=M(e,r),t=e):(tr=t,t=A)):(tr=t,t=A)):(tr=t,t=A),t===A&&(t=tr,35===d.charCodeAt(tr)?(e=I,tr++):(e=A,0===ir&&pr(D)),e!==A&&(er=t,e=N()),t=e)),t}())!==A&&(er=u,i=C(i)),(e=u=i)!==A){for(n=[],r=dr();r!==A;)n.push(r),r=dr();n!==A?(er=t,t=e=o(e,n)):(tr=t,t=A)}else tr=t,t=A;return t}function dr(){var t,e,n,r,u;if(t=tr,(e=Ar())!==A&&(n=yr())!==A?(er=tr,(r=(r=i(n))?void 0:A)!==A&&(u=vr())!==A?(er=t,t=e=m(n,u)):(tr=t,t=A)):(tr=t,t=A),t===A){if(t=tr,(e=Kr())===A&&(e=null),e!==A)if(T.test(d.charAt(tr))?(n=d.charAt(tr),tr++):(n=A,0===ir&&pr(k)),n!==A){if(r=[],(u=Kr())!==A)for(;u!==A;)r.push(u),u=Kr();else r=A;r!==A&&(u=vr())!==A?(er=t,t=e=x(u)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A;if(t===A){if(t=tr,(e=Kr())===A&&(e=null),e!==A)if(43===d.charCodeAt(tr)?(n=O,tr++):(n=A,0===ir&&pr(w)),n!==A){if(r=[],(u=Kr())!==A)for(;u!==A;)r.push(u),u=Kr();else r=A;r!==A&&(u=vr())!==A?(er=t,t=e=S(u)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A;t===A&&(t=tr,(e=function(){var t,e,n,r,u,i,o;for(t=tr,e=[],n=Kr();n!==A;)e.push(n),n=Kr();if(e!==A)if(d.substr(tr,2)===Y?(n=Y,tr+=2):(n=A,0===ir&&pr(tt)),n!==A)if(er=tr,(r=(r=et())?void 0:A)!==A){for(u=[],i=Kr();i!==A;)u.push(i),i=Kr();u!==A&&(i=Jr())!==A&&(o=Tr())!==A?(er=t,e=nt(o),t=e):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A;else tr=t,t=A;if(t===A){for(t=tr,e=[],n=Kr();n!==A;)e.push(n),n=Kr();if(e!==A)if(46===d.charCodeAt(tr)?(n=z,tr++):(n=A,0===ir&&pr(B)),n!==A)if(er=tr,(r=(r=rt())?void 0:A)!==A){for(u=[],i=Kr();i!==A;)u.push(i),i=Kr();u!==A&&(i=Jr())!==A&&(o=Tr())!==A?(er=t,e=nt(o),t=e):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A;else tr=t,t=A;t===A&&(t=tr,(e=Kr())!==A?(ir++,r=n=tr,ut.test(d.charAt(tr))?(u=d.charAt(tr),tr++):(u=A,0===ir&&pr(it)),u!==A&&(i=Kr())!==A?r=u=[u,i]:(tr=r,r=A),ir--,r===A?n=void 0:(tr=n,n=A),n!==A&&(r=xr())!==A?(er=t,e=ot(r),t=e):(tr=t,t=A)):(tr=t,t=A))}return t}())!==A&&(er=t,e=j(e)),t=e)}}return t}function Ar(){var t,e,n,r,u;for(t=tr,e=[],n=Kr();n!==A;)e.push(n),n=Kr();if(e!==A)if((n=Jr())!==A){for(r=[],u=Ur();u!==A;)r.push(u),u=Ur();r!==A?(er=t,t=e=V()):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A;return t}function yr(){var t,e;return t=tr,(e=function(){var t,e,n,r;if(ir++,e=t=tr,n=[],32===d.charCodeAt(tr)?(r=Je,tr++):(r=A,0===ir&&pr(Ke)),r!==A)for(;r!==A;)n.push(r),32===d.charCodeAt(tr)?(r=Je,tr++):(r=A,0===ir&&pr(Ke));else n=A;if((e=n!==A?d.substring(e,tr):n)!==A?(er=tr,(n=(n=rn(e))?void 0:A)!==A?(er=t,e=un(e),t=e):(tr=t,t=A)):(tr=t,t=A),t===A){if(e=t=tr,n=[],9===d.charCodeAt(tr)?(r=Qe,tr++):(r=A,0===ir&&pr(We)),r!==A)for(;r!==A;)n.push(r),9===d.charCodeAt(tr)?(r=Qe,tr++):(r=A,0===ir&&pr(We));else n=A;(e=n!==A?d.substring(e,tr):n)!==A?(er=tr,(n=(n=on(e))?void 0:A)!==A?(er=t,e=sn(e),t=e):(tr=t,t=A)):(tr=t,t=A)}return ir--,t===A&&(e=A,0===ir&&pr(nn)),t}())!==A&&(er=t,e=u(e)),t=e}function br(){var t,e,n,r,u;return t=tr,(e=Wr())!==A?(58===d.charCodeAt(tr)?(n=G,tr++):(n=A,0===ir&&pr($)),n!==A?(r=tr,ir++,u=Kr(),ir--,u===A?r=void 0:(tr=r,r=A),r!==A?(er=t,t=e=F(e)):(tr=t,t=A)):(tr=t,t=A)):(tr=t,t=A),t}function Cr(){var t,e,n;return t=tr,46===d.charCodeAt(tr)?(e=z,tr++):(e=A,0===ir&&pr(B)),e!==A&&(n=Wr())!==A?(er=t,t=e=F(n)):(tr=t,t=A),t}function mr(){var t;return(t=Rr())===A&&(t=Zr()),t}function Tr(){var t,e,n,r,u;if(t=tr,(e=kr())!==A){for(n=[],r=tr,Jr()!==A&&(u=kr())!==A?(er=r,r=st(e,u)):(tr=r,r=A);r!==A;)n.push(r),r=tr,Jr()!==A&&(u=kr())!==A?(er=r,r=st(e,u)):(tr=r,r=A);n!==A?(er=t,t=e=ft(e,n)):(tr=t,t=A)}else tr=t,t=A;return t}function kr(){var t,e,n,r,u,i;for(ir++,e=t=tr,n=[],r=Kr();r!==A;)n.push(r),r=Kr();if((e=n!==A?d.substring(e,tr):n)!==A?(er=tr,(n=(n=ct(e))?void 0:A)!==A&&(r=xr())!==A?(er=t,t=e=lt(e,r)):(tr=t,t=A)):(tr=t,t=A),t===A){for(n=e=t=tr,r=[],u=Kr();u!==A;)r.push(u),u=Kr();r!==A?(u=tr,ir++,i=Jr(),ir--,i!==A?(tr=u,u=void 0):u=A,u!==A?(er=n,n=r=ht(r)):(tr=n,n=A)):(tr=n,n=A),(e=n!==A?d.substring(e,tr):n)!==A&&(er=t,e=pt(e)),t=e}return ir--,t===A&&(e=A,0===ir&&pr(at)),t}function xr(){var t,e;if(ir++,t=[],(e=Or())===A&&(e=Sr()),e!==A)for(;e!==A;)t.push(e),(e=Or())===A&&(e=Sr());else t=A;return ir--,t===A&&(e=A,0===ir&&pr(_t)),t}function Or(){var t,e,n,r;return t=tr,(e=wr())===A&&(e=tr,d.substr(tr,2)===gt?(n=gt,tr+=2):(n=A,0===ir&&pr(vt)),n!==A&&(r=wr())!==A?(er=e,e=n=dt(r)):(tr=e,e=A),e===A&&(e=tr,92===d.charCodeAt(tr)?(n=At,tr++):(n=A,0===ir&&pr(yt)),n!==A&&(r=wr())!==A?(er=e,e=n=bt(r)):(tr=e,e=A))),e!==A&&(er=t,e=Ct(e)),t=e}function wr(){var t,e,n,r,u;if(e=[],r=n=t=tr,ir++,(u=Jr())===A&&(36===d.charCodeAt(tr)?(u=mt,tr++):(u=A,0===ir&&pr(Tt)),u===A&&(92===d.charCodeAt(tr)?(u=At,tr++):(u=A,0===ir&&pr(yt)))),ir--,u===A?r=void 0:(tr=r,r=A),r!==A?(d.length>tr?(u=d.charAt(tr),tr++):(u=A,0===ir&&pr(c)),u!==A?n=r=[r,u]:(tr=n,n=A)):(tr=n,n=A),n!==A)for(;n!==A;)e.push(n),r=n=tr,ir++,(u=Jr())===A&&(36===d.charCodeAt(tr)?(u=mt,tr++):(u=A,0===ir&&pr(Tt)),u===A&&(92===d.charCodeAt(tr)?(u=At,tr++):(u=A,0===ir&&pr(yt)))),ir--,u===A?r=void 0:(tr=r,r=A),r!==A?(d.length>tr?(u=d.charAt(tr),tr++):(u=A,0===ir&&pr(c)),u!==A?n=r=[r,u]:(tr=n,n=A)):(tr=n,n=A);else e=A;return t=e!==A?d.substring(t,tr):e}function Sr(){var t,e,n,r,u;return t=tr,36===d.charCodeAt(tr)?(e=mt,tr++):(e=A,0===ir&&pr(Tt)),e!==A&&(n=Br())!==A?(r=tr,ir++,40===d.charCodeAt(tr)?(u=U,tr++):(u=A,0===ir&&pr(Q)),ir--,u===A?r=void 0:(tr=r,r=A),r!==A?(er=t,t=e=kt(n)):(tr=t,t=A)):(tr=t,t=A),t===A&&(t=tr,36===d.charCodeAt(tr)?(e=mt,tr++):(e=A,0===ir&&pr(Tt)),e!==A?((n=Dr())===A&&(n=null),n!==A?(er=t,t=e=xt(n)):(tr=t,t=A)):(tr=t,t=A)),t}function jr(){var t,e,n,r,u,i;if(t=tr,(e=Vr())!==A){for(n=[],r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();for(u!==A&&(i=Vr())!==A?(er=r,r=u=Ot(e,i)):(tr=r,r=A);r!==A;){for(n.push(r),r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();u!==A&&(i=Vr())!==A?(er=r,r=u=Ot(e,i)):(tr=r,r=A)}n!==A?(er=t,t=e=a(e,n)):(tr=t,t=A)}else tr=t,t=A;return t}function Vr(){var t,e,n,r,u,i,o,s,f,a,c;for(t=tr,e=[],n=Kr();n!==A;)e.push(n),n=Kr();if(e!==A)if(40===d.charCodeAt(tr)?(n=U,tr++):(n=A,0===ir&&pr(Q)),n!==A){for(r=[],u=Kr();u!==A;)r.push(u),u=Kr();if(r!==A)if((u=Pr())!==A){for(i=[],o=Kr();o!==A;)i.push(o),o=Kr();i!==A?(41===d.charCodeAt(tr)?(o=J,tr++):(o=A,0===ir&&pr(K)),o!==A?((s=Er())===A&&(s=null),s!==A?(er=t,t=e=wt(u,s)):(tr=t,t=A)):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;else tr=t,t=A;if(t===A){for(t=tr,e=[],n=Kr();n!==A;)e.push(n),n=Kr();if(e!==A)if(40===d.charCodeAt(tr)?(n=U,tr++):(n=A,0===ir&&pr(Q)),n!==A)if((r=Jr())!==A)if((u=function(){var t,e,n,r,u,i,o;if(t=tr,(e=Hr())!==A){for(n=[],r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();for(u!==A&&(i=Jr())!==A&&(o=Hr())!==A?(er=r,u=Vt(e,o),r=u):(tr=r,r=A);r!==A;){for(n.push(r),r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();u!==A&&(i=Jr())!==A&&(o=Hr())!==A?(er=r,u=Vt(e,o),r=u):(tr=r,r=A)}n!==A?(er=t,e=Ht(e,n),t=e):(tr=t,t=A)}else tr=t,t=A;return t}())!==A){for(i=[],o=Kr();o!==A;)i.push(o),o=Kr();if(i!==A)if((o=Jr())!==A){for(s=tr,f=[],a=Kr();a!==A;)f.push(a),a=Kr();(s=f!==A?d.substring(s,tr):f)!==A?(er=tr,(f=(f=St(u,s))?void 0:A)!==A?(41===d.charCodeAt(tr)?(a=J,tr++):(a=A,0===ir&&pr(K)),a!==A?((c=Er())===A&&(c=null),c!==A?(er=t,t=e=jt(u,s,c)):(tr=t,t=A)):(tr=t,t=A)):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;else tr=t,t=A;else tr=t,t=A;else tr=t,t=A}return t}function Hr(){var t,e,n,r;if(e=t=tr,n=[],(r=Kr())!==A)for(;r!==A;)n.push(r),r=Kr();else n=A;return(e=n!==A?d.substring(e,tr):n)!==A?(er=tr,(n=(n=Pt(e))?void 0:A)!==A&&(r=Pr())!==A?(er=t,t=e=Lt(e,r)):(tr=t,t=A)):(tr=t,t=A),t}function Pr(){var t,e,n,r,u,i,o,s;if(t=tr,(e=Lr())!==A){for(n=[],r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(44===d.charCodeAt(tr)?(i=Et,tr++):(i=A,0===ir&&pr(Mt)),i===A&&(i=null),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A&&(s=Lr())!==A?(er=r,r=u=It(e,s)):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A;for(;r!==A;){for(n.push(r),r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(44===d.charCodeAt(tr)?(i=Et,tr++):(i=A,0===ir&&pr(Mt)),i===A&&(i=null),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A&&(s=Lr())!==A?(er=r,r=u=It(e,s)):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A}n!==A?(er=t,t=e=a(e,n)):(tr=t,t=A)}else tr=t,t=A;return t}function Lr(){var t,e,n,r,u,i,o,s;if(ir++,t=tr,(e=br())!==A)if((n=Wr())!==A){for(ir++,u=r=tr,i=[],o=Kr();o!==A;)i.push(o),o=Kr();i!==A?(61===d.charCodeAt(tr)?(o=p,tr++):(o=A,0===ir&&pr(_)),o!==A?u=i=[i,o]:(tr=u,u=A)):(tr=u,u=A),ir--,u===A?r=void 0:(tr=r,r=A),r!==A?(er=t,t=e=Nt(e,n)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A;if(t===A){if(t=tr,(e=br())===A&&(e=null),e!==A)if((n=Wr())!==A){for(r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(61===d.charCodeAt(tr)?(i=p,tr++):(i=A,0===ir&&pr(_)),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A&&(s=Mr())!==A?(er=r,r=u=Gt(e,n,s)):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A;r!==A?(er=t,t=e=$t(e,n,r)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A;if(t===A){for(e=t=tr,n=[],r=Kr();r!==A;)n.push(r),r=Kr();n!==A&&(r=Mr())!==A?(er=e,e=n=Ft(r)):(tr=e,e=A),e!==A&&(er=t,e=zt(e)),t=e}}return ir--,t===A&&(e=A,0===ir&&pr(Dt)),t}function Er(){var t,e,n,r,u,i,o,s,f,a;for(ir++,t=tr,e=[],n=Kr();n!==A;)e.push(n),n=Kr();if(e!==A)if(38===d.charCodeAt(tr)?(n=Zt,tr++):(n=A,0===ir&&pr(Rt)),n!==A){for(ir++,u=r=tr,i=[],qt.test(d.charAt(tr))?(o=d.charAt(tr),tr++):(o=A,0===ir&&pr(Ut));o!==A;)i.push(o),qt.test(d.charAt(tr))?(o=d.charAt(tr),tr++):(o=A,0===ir&&pr(Ut));if(i!==A?(59===d.charCodeAt(tr)?(o=Qt,tr++):(o=A,0===ir&&pr(Wt)),o!==A?u=i=[i,o]:(tr=u,u=A)):(tr=u,u=A),ir--,u===A?r=void 0:(tr=r,r=A),r!==A){for(u=[],i=Kr();i!==A;)u.push(i),i=Kr();u!==A&&(i=Wr())!==A?(o=tr,40===d.charCodeAt(tr)?(s=U,tr++):(s=A,0===ir&&pr(Q)),s!==A&&(f=Pr())!==A?(41===d.charCodeAt(tr)?(a=J,tr++):(a=A,0===ir&&pr(K)),a!==A?(er=o,o=s=Jt(i,f)):(tr=o,o=A)):(tr=o,o=A),o===A&&(o=null),o!==A?(er=t,t=e=Kt(i,o)):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A}else tr=t,t=A;else tr=t,t=A;return ir--,t===A&&(e=A,0===ir&&pr(Bt)),t}function Mr(){var t,e,n,r,u,i,o,s;if(t=tr,(e=Ir())!==A){for(n=[],r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(43===d.charCodeAt(tr)?(i=O,tr++):(i=A,0===ir&&pr(w)),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A&&(s=Ir())!==A?(er=r,r=u=Xt(e,s)):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A;for(;r!==A;){for(n.push(r),r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(43===d.charCodeAt(tr)?(i=O,tr++):(i=A,0===ir&&pr(w)),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A&&(s=Ir())!==A?(er=r,r=u=Xt(e,s)):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A}n!==A?(er=t,t=e=a(e,n)):(tr=t,t=A)}else tr=t,t=A;return t}function Ir(){var t;return ir++,(t=Dr())===A&&(t=Rr()),ir--,t===A&&0===ir&&pr(Yt),t}function Dr(){var t,e,n,r,u,i,o;if(t=tr,(e=Wr())===A&&(e=null),e!==A)if(40===d.charCodeAt(tr)?(n=U,tr++):(n=A,0===ir&&pr(Q)),n!==A){for(r=[],u=Kr();u!==A;)r.push(u),u=Kr();if(r!==A)if((u=function(){var t,e,n,r,u,i,o,s;if(t=tr,(e=Nr())!==A){for(n=[],r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(44===d.charCodeAt(tr)?(i=Et,tr++):(i=A,0===ir&&pr(Mt)),i===A&&(i=null),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A&&(s=Nr())!==A?(er=r,u=ee(e,s),r=u):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A;for(;r!==A;){for(n.push(r),r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(44===d.charCodeAt(tr)?(i=Et,tr++):(i=A,0===ir&&pr(Mt)),i===A&&(i=null),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A&&(s=Nr())!==A?(er=r,u=ee(e,s),r=u):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A}n!==A?(er=t,e=ne(e,n),t=e):(tr=t,t=A)}else tr=t,t=A;return t}())!==A){for(i=[],o=Kr();o!==A;)i.push(o),o=Kr();i!==A?(41===d.charCodeAt(tr)?(o=J,tr++):(o=A,0===ir&&pr(K)),o!==A?(er=t,t=e=te(e,u)):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;else tr=t,t=A;return t}function Nr(){var t,e,n,r,u,i;if(t=tr,(e=Wr())!==A){for(n=[],r=Kr();r!==A;)n.push(r),r=Kr();if(n!==A)if(61===d.charCodeAt(tr)?(r=p,tr++):(r=A,0===ir&&pr(_)),r!==A){for(u=[],i=Kr();i!==A;)u.push(i),i=Kr();u!==A&&(i=qr())!==A?(er=t,t=e=re(e,i)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;return t===A&&(t=tr,(e=qr())!==A&&(er=t,e=ue(e)),t=e),t}function Gr(){var t,e,n,r,u,i,o,s,f;if(t=tr,(e=Wr())!==A)if(40===d.charCodeAt(tr)?(n=U,tr++):(n=A,0===ir&&pr(Q)),n!==A){for(r=[],u=Kr();u!==A;)r.push(u),u=Kr();if(r!==A)if((u=Rr())!==A){for(i=[],o=tr,s=[],f=Kr();f!==A;)s.push(f),f=Kr();for(s!==A&&(f=Rr())!==A?(er=o,o=s=se(e,u,f)):(tr=o,o=A);o!==A;){for(i.push(o),o=tr,s=[],f=Kr();f!==A;)s.push(f),f=Kr();s!==A&&(f=Rr())!==A?(er=o,o=s=se(e,u,f)):(tr=o,o=A)}if(i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A?(41===d.charCodeAt(tr)?(s=J,tr++):(s=A,0===ir&&pr(K)),s!==A?(er=t,t=e=fe(e,u,i)):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A}else tr=t,t=A;else tr=t,t=A}else tr=t,t=A;else tr=t,t=A;return t}function $r(){var t,e;return t=tr,(e=function(){var t,e,n,r,u;if(ir++,t=tr,34===d.charCodeAt(tr)?(e=an,tr++):(e=A,0===ir&&pr(cn)),e!==A){for(n=tr,r=[],u=Xr();u!==A;)r.push(u),u=Xr();(n=r!==A?d.substring(n,tr):r)!==A?(34===d.charCodeAt(tr)?(r=an,tr++):(r=A,0===ir&&pr(cn)),r!==A?(er=t,e=ln(n),t=e):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A;if(t===A)if(t=tr,39===d.charCodeAt(tr)?(e=hn,tr++):(e=A,0===ir&&pr(pn)),e!==A){for(n=tr,r=[],u=Yr();u!==A;)r.push(u),u=Yr();(n=r!==A?d.substring(n,tr):r)!==A?(39===d.charCodeAt(tr)?(r=hn,tr++):(r=A,0===ir&&pr(pn)),r!==A?(er=t,e=ln(n),t=e):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A;return ir--,t===A&&(e=A,0===ir&&pr(fn)),t}())!==A&&(er=t,e=ae(e)),t=e}function Fr(){var t,e,n,r,u;return ir++,n=t=tr,Nn.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(Gn)),r===A&&(r=null),r!==A&&(u=function(){var t,e,n,r,u;if(t=tr,d.substr(tr,2).toLowerCase()===Fn?(e=d.substr(tr,2),tr+=2):(e=A,0===ir&&pr(zn)),e!==A){if(n=[],Bn.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(Zn)),r!==A)for(;r!==A;)n.push(r),Bn.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(Zn));else n=A;n!==A?(er=t,e=Rn(),t=e):(tr=t,t=A)}else tr=t,t=A;if(t===A){if(t=tr,48===d.charCodeAt(tr)?(e=yn,tr++):(e=A,0===ir&&pr(bn)),e!==A){if(n=[],qn.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(Un)),r!==A)for(;r!==A;)n.push(r),qn.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(Un));else n=A;n!==A?(er=t,e=Qn(),t=e):(tr=t,t=A)}else tr=t,t=A;if(t===A){if(t=tr,(e=eu())===A&&(e=null),e!==A)if(46===d.charCodeAt(tr)?(n=z,tr++):(n=A,0===ir&&pr(B)),n!==A){if(r=[],Cn.test(d.charAt(tr))?(u=d.charAt(tr),tr++):(u=A,0===ir&&pr(mn)),u!==A)for(;u!==A;)r.push(u),Cn.test(d.charAt(tr))?(u=d.charAt(tr),tr++):(u=A,0===ir&&pr(mn));else r=A;r!==A?((u=nu())===A&&(u=null),u!==A?(er=t,e=Wn(),t=e):(tr=t,t=A)):(tr=t,t=A)}else tr=t,t=A;else tr=t,t=A;t===A&&(t=tr,(e=eu())!==A?((n=nu())===A&&(n=null),n!==A?(er=t,e=Wn(),t=e):(tr=t,t=A)):(tr=t,t=A))}}return t}())!==A?(er=n,r=$n(r,u),n=r):(tr=n,n=A),ir--,n===A&&(r=A,0===ir&&pr(Dn)),(e=n)!==A&&(er=t,e=ce(e)),t=e}function zr(){var t,e,n,r;return ir++,n=t=tr,d.substr(tr,4)===Hn?(r=Hn,tr+=4):(r=A,0===ir&&pr(Pn)),r!==A&&(er=n,r=Ln()),(n=r)===A&&(n=tr,d.substr(tr,5)===En?(r=En,tr+=5):(r=A,0===ir&&pr(Mn)),r!==A&&(er=n,r=In()),n=r),ir--,n===A&&(r=A,0===ir&&pr(Vn)),(e=n)!==A&&(er=t,e=le(e)),t=e}function Br(){var t,e;return t=tr,(e=Qr())!==A&&(er=t,e=ge(e)),t=e}function Zr(){var t,e;return ir++,t=tr,d.substr(tr,2)===be?(e=be,tr+=2):(e=A,0===ir&&pr(Ce)),e===A&&(d.substr(tr,2)===me?(e=me,tr+=2):(e=A,0===ir&&pr(Te)),e===A&&(d.substr(tr,2)===ke?(e=ke,tr+=2):(e=A,0===ir&&pr(xe)),e===A&&(62===d.charCodeAt(tr)?(e=Oe,tr++):(e=A,0===ir&&pr(we)),e===A&&(60===d.charCodeAt(tr)?(e=Se,tr++):(e=A,0===ir&&pr(je)),e===A&&(d.substr(tr,2)===Ve?(e=Ve,tr+=2):(e=A,0===ir&&pr(He))))))),e!==A&&(er=t,e=Pe()),ir--,(t=e)===A&&(e=A,0===ir&&pr(ye)),t}function Rr(){var t,e,n;return(t=$r())===A&&(t=Fr())===A&&(t=zr())===A&&(e=tr,d.substr(tr,4)===he?(n=he,tr+=4):(n=A,0===ir&&pr(pe)),n!==A&&(er=e,n=_e()),(t=e=n)===A&&(t=Br())===A&&(t=function(){var t,e,n,r;if(e=t=tr,n=[],ve.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(de)),r!==A)for(;r!==A;)n.push(r),ve.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(de));else n=A;return(e=n!==A?d.substring(e,tr):n)!==A&&(n=Qr())!==A?(er=t,t=e=Ae(e,n)):(tr=t,t=A),t}())),t}function qr(){var t;return(t=function(){var t,e,n,r,u,i,o,s;if(t=tr,(e=Rr())!==A){for(n=[],r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(124===d.charCodeAt(tr)?(i=L,tr++):(i=A,0===ir&&pr(E)),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A?((s=Gr())===A&&(s=Rr()),s!==A?(er=r,r=u=ie(e,s)):(tr=r,r=A)):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A;if(r!==A)for(;r!==A;){for(n.push(r),r=tr,u=[],i=Kr();i!==A;)u.push(i),i=Kr();if(u!==A)if(124===d.charCodeAt(tr)?(i=L,tr++):(i=A,0===ir&&pr(E)),i!==A){for(o=[],s=Kr();s!==A;)o.push(s),s=Kr();o!==A?((s=Gr())===A&&(s=Rr()),s!==A?(er=r,r=u=ie(e,s)):(tr=r,r=A)):(tr=r,r=A)}else tr=r,r=A;else tr=r,r=A}else n=A;n!==A?(er=t,t=e=oe(e,n)):(tr=t,t=A)}else tr=t,t=A;return t}())===A&&(t=Rr())===A&&(t=Zr()),t}function Ur(){var t,e,n;for(ir++,t=tr,e=[],n=Kr();n!==A;)e.push(n),n=Kr();return e!==A&&(n=Jr())!==A?t=e=[e,n]:(tr=t,t=A),ir--,t===A&&(e=A,0===ir&&pr(Le)),t}function Qr(){var t,e,n,r,u,i,o;if(ir++,e=t=tr,(n=Wr())!==A){for(r=[],u=tr,46===d.charCodeAt(tr)?(i=z,tr++):(i=A,0===ir&&pr(B)),i!==A&&(o=Wr())!==A?u=i=[i,o]:(tr=u,u=A);u!==A;)r.push(u),u=tr,46===d.charCodeAt(tr)?(i=z,tr++):(i=A,0===ir&&pr(B)),i!==A&&(o=Wr())!==A?u=i=[i,o]:(tr=u,u=A);r!==A?e=n=[n,r]:(tr=e,e=A)}else tr=e,e=A;return t=e!==A?d.substring(t,tr):e,ir--,t===A&&(e=A,0===ir&&pr(Ee)),t}function Wr(){var t,e,n,r,u;if(ir++,t=tr,Me.test(d.charAt(tr))?(e=d.charAt(tr),tr++):(e=A,0===ir&&pr(Ie)),e!==A){for(n=tr,r=[],De.test(d.charAt(tr))?(u=d.charAt(tr),tr++):(u=A,0===ir&&pr(Ne));u!==A;)r.push(u),De.test(d.charAt(tr))?(u=d.charAt(tr),tr++):(u=A,0===ir&&pr(Ne));(n=r!==A?d.substring(n,tr):r)!==A?(er=t,t=e=Ge(e,n)):(tr=t,t=A)}else tr=t,t=A;return ir--,t===A&&(e=A,0===ir&&pr(Ee)),t}function Jr(){var t;return ir++,10===d.charCodeAt(tr)?(t=Fe,tr++):(t=A,0===ir&&pr(ze)),t===A&&(13===d.charCodeAt(tr)?(t=Be,tr++):(t=A,0===ir&&pr(Ze)),t===A&&(d.substr(tr,2)===Re?(t=Re,tr+=2):(t=A,0===ir&&pr(qe)))),ir--,t===A&&0===ir&&pr($e),t}function Kr(){var t;return ir++,9===d.charCodeAt(tr)?(t=Qe,tr++):(t=A,0===ir&&pr(We)),t===A&&(32===d.charCodeAt(tr)?(t=Je,tr++):(t=A,0===ir&&pr(Ke)),t===A&&(11===d.charCodeAt(tr)?(t=Xe,tr++):(t=A,0===ir&&pr(Ye)),t===A&&(12===d.charCodeAt(tr)?(t=tn,tr++):(t=A,0===ir&&pr(en))))),ir--,t===A&&0===ir&&pr(Ue),t}function Xr(){var t,e,n;return ir++,e=t=tr,ir++,34===d.charCodeAt(tr)?(n=an,tr++):(n=A,0===ir&&pr(cn)),n===A&&(92===d.charCodeAt(tr)?(n=At,tr++):(n=A,0===ir&&pr(yt)),n===A&&(n=Jr())),ir--,n===A?e=void 0:(tr=e,e=A),e!==A?(d.length>tr?(n=d.charAt(tr),tr++):(n=A,0===ir&&pr(c)),n!==A?(er=t,t=e=gn()):(tr=t,t=A)):(tr=t,t=A),t===A&&(t=tr,92===d.charCodeAt(tr)?(e=At,tr++):(e=A,0===ir&&pr(yt)),e!==A&&(n=tu())!==A?(er=t,t=e=vn(n)):(tr=t,t=A)),ir--,t===A&&(e=A,0===ir&&pr(_n)),t}function Yr(){var t,e,n;return ir++,e=t=tr,ir++,39===d.charCodeAt(tr)?(n=hn,tr++):(n=A,0===ir&&pr(pn)),n===A&&(92===d.charCodeAt(tr)?(n=At,tr++):(n=A,0===ir&&pr(yt)),n===A&&(n=Jr())),ir--,n===A?e=void 0:(tr=e,e=A),e!==A?(d.length>tr?(n=d.charAt(tr),tr++):(n=A,0===ir&&pr(c)),n!==A?(er=t,t=e=gn()):(tr=t,t=A)):(tr=t,t=A),t===A&&(t=tr,92===d.charCodeAt(tr)?(e=At,tr++):(e=A,0===ir&&pr(yt)),e!==A&&(n=tu())!==A?(er=t,t=e=vn(n)):(tr=t,t=A)),ir--,t===A&&(e=A,0===ir&&pr(dn)),t}function tu(){var t,e,n,r;return ir++,t=tr,48===d.charCodeAt(tr)?(e=yn,tr++):(e=A,0===ir&&pr(bn)),e!==A?(n=tr,ir++,Cn.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(mn)),ir--,r===A?n=void 0:(tr=n,n=A),n!==A?(er=t,t=e=Tn()):(tr=t,t=A)):(tr=t,t=A),t===A&&(34===d.charCodeAt(tr)?(t=an,tr++):(t=A,0===ir&&pr(cn)),t===A&&(39===d.charCodeAt(tr)?(t=hn,tr++):(t=A,0===ir&&pr(pn)),t===A&&(92===d.charCodeAt(tr)?(t=At,tr++):(t=A,0===ir&&pr(yt)),t===A&&(t=tr,kn.test(d.charAt(tr))?(e=d.charAt(tr),tr++):(e=A,0===ir&&pr(xn)),e!==A&&(er=t,e=On(e)),(t=e)===A&&(t=tr,98===d.charCodeAt(tr)?(e=wn,tr++):(e=A,0===ir&&pr(Sn)),e!==A&&(er=t,e=jn()),t=e))))),ir--,t===A&&(e=A,0===ir&&pr(An)),t}function eu(){var t,e,n,r;if(t=tr,Jn.test(d.charAt(tr))?(e=d.charAt(tr),tr++):(e=A,0===ir&&pr(Kn)),e!==A){for(n=[],Cn.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(mn));r!==A;)n.push(r),Cn.test(d.charAt(tr))?(r=d.charAt(tr),tr++):(r=A,0===ir&&pr(mn));n!==A?t=e=[e,n]:(tr=t,t=A)}else tr=t,t=A;return t===A&&(48===d.charCodeAt(tr)?(t=yn,tr++):(t=A,0===ir&&pr(bn))),t}function nu(){var t,e,n,r;return t=tr,d.substr(tr,1).toLowerCase()===Xn?(e=d.charAt(tr),tr++):(e=A,0===ir&&pr(Yn)),e!==A?(Nn.test(d.charAt(tr))?(n=d.charAt(tr),tr++):(n=A,0===ir&&pr(Gn)),n===A&&(n=null),n!==A&&(r=eu())!==A?t=e=[e,n,r]:(tr=t,t=A)):(tr=t,t=A),t}var ru,uu,iu,ou=[],su=t.ast,fu=function(){return ou[ou.length-1]},au=function(t){return t.reduce(function(t,e){for(t.push(e);t[t.length-1].sibling;){var n=t[t.length-1];t.push(n.sibling),delete n.sibling}return t},[])},cu=0,lu=null,hu=0;if((e=r())!==A&&tr===d.length)return e;throw e!==A&&tr<d.length&&pr({type:"end"}),ru=ur,uu=rr<d.length?d.charAt(rr):null,iu=rr<d.length?hr(rr,rr+1):hr(rr,rr),new pu(pu.buildMessage(ru,uu),ru,uu,iu)};var P=function(){function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,n=arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"\n",u=arguments[4],i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{},o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{};l(this,s),this._result=[],this._options=t,this._indent=e,this._indentToken=n||"    ",this._newLineToken=r,this._parent=u,this._factories=i,this._note=o}return r(s,[{key:"register",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){e._factories[t.type]||(e._factories[t.type]=[]),e._factories[t.type].unshift(t)})}},{key:"remove",value:function(e){this._factories[e.type]&&(this._factories[e.type]=this._factories[e.type].filter(function(t){return t!==e}))}},{key:"replace",value:function(t,e){if(t.type===e.type&&this._factories[t.type]){var n=this._factories[t.type].indexOf(t);-1!==n&&(this._factories[t.type][n]=e)}}},{key:"create",value:function(t,e){var n=this._factories[t.type];if(n){for(var r=void 0,u=0;!r&&u<n.length;)r=n[u].create(t,e),u++;return r}}},{key:"_setHaveIndent",value:function(t){this._parent&&(this._parent._haveIndent=t,this._parent._setHaveIndent(t))}},{key:"indent",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;if(!this.haveContent())return this;for(var e="",n=0;n<this._indent+t;n++)e+=this._indentToken;return this._result.push(e),this._setHaveIndent(!0),this}},{key:"mergeUp",value:function(){this._parent&&(this._parent._result=this._parent._result.concat(this._result))}},{key:"push",value:function(t){return this._result.push(t),this}},{key:"pop",value:function(){return this._result.pop(),this}},{key:"eol",value:function(){return this.haveContent()&&this._result.push(this._newLineToken),this}},{key:"sub",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new s(this._options,t+this._indent+1,this._indentToken,this._newLineToken,this,this._factories,this._note)}},{key:"haveContent",value:function(){return this._parent&&this._parent.haveContent()||0!==this._result.length}},{key:"getOutput",value:function(){return this._parent||this._result.slice(-1)[0]!==this._newLineToken&&this.eol(),this._result.join("")}},{key:"compile",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=this.create(t,e);if(!r)return null;var u=this.sub(n);return r.compile(u),u}},{key:"options",get:function(){return this._options}},{key:"note",get:function(){return this._note}},{key:"haveIndent",get:function(){return this._haveIndent}}]),s}();t.compile=function(t,e){var n=H(t,{ast:V});if(e.compile)return e.compile(n,e);var r="";n.declaration&&(r=n.declaration.name),!r&&e.defaultPlugin&&(r=e.defaultPlugin),r&&"string"==typeof r&&e.plugins&&e.plugins[r]&&(r=e.plugins[r]),r||(r="html"),r&&"string"==typeof r&&("sleet-"===r.slice(0,6)&&(r=r.slice(6)),r=require(r).plugin);var u=new P(e,0,n.indent,e.newLineToken||"\n"),i=r;return i.prepare&&i.prepare(u),i.compile(n,e,u)},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=sleet.min.js.map
