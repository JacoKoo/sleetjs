!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Sleet={})}(this,function(c){"use strict";function pu(t,e,n,r){this.message=t,this.expected=e,this.found=n,this.location=r,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,pu)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(pu,Error),pu.buildMessage=function(t,e){var n,i={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var e,n="";for(e=0;e<t.parts.length;e++)n+=t.parts[e]instanceof Array?o(t.parts[e][0])+"-"+o(t.parts[e][1]):o(t.parts[e]);return"["+(t.inverted?"^":"")+n+"]"},any:function(t){return"any character"},end:function(t){return"end of input"},other:function(t){return t.description}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(t){return"\\x0"+r(t)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(t){return"\\x"+r(t)})}return"Expected "+function(t){var e,n,r,u=new Array(t.length);for(e=0;e<t.length;e++)u[e]=(r=t[e],i[r.type](r));if(u.sort(),0<u.length){for(n=e=1;e<u.length;e++)u[e-1]!==u[e]&&(u[n]=u[e],n++);u.length=n}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(t)+" but "+((n=e)?'"'+u(n)+'"':"end of input")+" found."};var t,n=function(v,t){t=void 0!==t?t:{};var e,y={},n={start:_r},r=_r,s=function(t,e){return{nodes:fu(e||[]),indent:lu||"",declaration:t}},l="#!",h=ar("#!",!1),p="=",_=ar("=",!1),d=function(t,e){return e},g=function(t,e,n){return n},A=function(t,e,n){return new su.Declaration(t,e,n,sr())},c={type:"any"},b=function(t,e){return{key:t,value:e}},a=function(t,e){return e},f=function(t,e){return e.unshift(t)&&e},o=function(e,t){var n=t.filter(function(t){return t!==e.sibling});return e.sibling||(n=fu(n)),e._setChildren(n),ou.pop(),e},m=function(t){return ou.push(t)&&t},i=function(t){return t===au().indent+1},T=function(t,e){return e},C=/^[:>]/,k=fr([":",">"],!1,!1),x=function(t){return t._indent++,t},O="+",w=ar("+",!1),S=function(t){return(au().sibling=t)._indent++,t},V=function(t){var e=au();if("|"===e.name)return e._setText(t),e;var n=new su.Tag(cu,"|",1===t.length?"inline":null,[],null,[],null,sr());return n._setText(t),n},N=function(){cu=0},u=function(t){return cu=t||0},j=function(t,e,n,r,u){return e||0<n.length||r||0<u.length},H=function(t,e,n,r,u,i,o){return new su.Tag(cu,e,t,n.concat(u),r,i,o,sr())},P="|",L=ar("|",!1),E=function(t,e){return new su.Tag(cu,"|",t,[],null,e,null,sr())},I="#",M=ar("#",!1),D=function(){return new su.Tag(cu,"#",null,[],null,[],null,sr())},G=":",$=ar(":",!1),F=function(t){return t},B=".",z=ar(".",!1),Z="@",R=ar("@",!1),U=function(t,e){return new su.TagExtra(t,e,sr())},q="(",Q=ar("(",!1),W=function(t,e){return e},J=")",K=ar(")",!1),X=function(t,e){return e.unshift(t)&&e},Y="..",tt=ar("..",!1),et=function(){return!(hu=0)},nt=function(t){return t},rt=function(){return hu=1,!0},ut=/^[:>+]/,it=fr([":",">","+"],!1,!1),ot=function(t){return[t]},st=function(t,e){return e},at=function(t,e){return e.unshift(t),e},ft=cr("Tag text line"),ct=function(t){return t.length?(null===lu&&(lu=t.indexOf("\t")<0?t:"\t"),t.length>=(cu+hu)*lu.length):0===cu&&0===hu},lt=function(t,e){var n=t.slice((cu+hu)*(lu||"").length);return e.unshift(new su.StaticText(n,sr())),e},ht=function(t){return t},pt=function(t){var e=t.slice((cu+hu)*(lu||"").length);return[new su.StaticText(e,sr())]},_t=cr("Text to end of line"),dt="\\$",gt=ar("\\$",!1),vt=function(t){return"$"+t},yt="\\",At=ar("\\",!1),bt=function(t){return or()},mt=function(t){return new su.StaticText(t,sr())},Tt="$",Ct=ar("$",!1),kt=function(t){return new su.DynamicText(t,sr())},xt=function(t){return t||new su.StaticText("$",sr()),new su.DynamicText(t,sr())},Ot=function(t,e){return e},wt=function(t,e){return new su.AttributeGroup(t,e,sr())},St=function(t,e){return(e||"").length===cu*lu.length},Vt=function(t,e,n){return new su.AttributeGroup(t,n,sr())},Nt=function(t,e){return e},jt=function(t,e){return e.reduce(function(t,e){return t.concat(e)},t)},Ht=function(t){return null===lu&&(lu=t.indexOf("\t")<0?t:"\t"),t.length===(cu+1)*lu.length},Pt=function(t,e){return e},Lt=",",Et=ar(",",!1),It=function(t,e){return e},Mt=cr("Attribute pair"),Dt=function(t,e){return new su.Attribute(t,e,[],sr())},Gt=function(t,e,n){return n},$t=function(t,e,n){return new su.Attribute(t,e,n,sr())},Ft=function(t){return t},Bt=function(t){return new su.Attribute(null,null,t,sr())},zt=cr("Attribute setting"),Zt="&",Rt=ar("&",!1),Ut=/^[#a-zA-Z0-9]/,qt=fr(["#",["a","z"],["A","Z"],["0","9"]],!1,!1),Qt=";",Wt=ar(";",!1),Jt=function(t,e){return e},Kt=function(t,e){return new su.Setting(t,e,sr())},Xt=function(t,e){return e},Yt=cr("Attribute value"),te=function(t,e){return new su.Helper(t,e,sr())},ee=function(t,e){return e},ne=function(t,e){return e.unshift(t),e},re=function(t,e){return new su.HelperAttribute(t,e,sr())},ue=function(t){return new su.HelperAttribute(null,t,sr())},ie=function(t,e){return e},oe=function(t,e){return new su.TransformValue(t,e,sr())},se=function(t,e,n){return n},ae=function(t,e,n){return n.unshift(e),new su.Transformer(t,n,sr())},fe=function(t){return new su.StringValue(t,sr())},ce=function(t){return new su.NumberValue(t,sr())},le=function(t){return new su.BooleanValue(t,sr())},he="null",pe=ar("null",!1),_e=function(){return new su.NullValue(sr())},de=function(t){return new su.IdentifierValue(t,sr())},ge=/^[.\/]/,ve=fr([".","/"],!1,!1),ye=function(t,e){return new su.IdentifierValue(t+e,sr())},Ae=cr("Compare Operator"),be="==",me=ar("==",!1),Te=">=",Ce=ar(">=",!1),ke="<=",xe=ar("<=",!1),Oe=">",we=ar(">",!1),Se="<",Ve=ar("<",!1),Ne="!=",je=ar("!=",!1),He=function(){return new su.CompareOperatorValue(or(),sr())},Pe=cr("Blank line"),Le=cr("Identifier"),Ee=/^[a-zA-Z$@_]/,Ie=fr([["a","z"],["A","Z"],"$","@","_"],!1,!1),Me=/^[a-zA-Z0-9$_\-]/,De=fr([["a","z"],["A","Z"],["0","9"],"$","_","-"],!1,!1),Ge=function(t,e){return t+e},$e=cr("End of line"),Fe="\n",Be=ar("\n",!1),ze="\r",Ze=ar("\r",!1),Re="\r\n",Ue=ar("\r\n",!1),qe=cr("Whitespace"),Qe="\t",We=ar("\t",!1),Je=" ",Ke=ar(" ",!1),Xe="\v",Ye=ar("\v",!1),tn="\f",en=ar("\f",!1),nn=cr("Indents"),rn=function(t){return null===lu&&(lu=t),t.length%lu.length==0},un=function(t){return t.length/lu.length},on=function(t){return null===lu&&(lu="\t"),"\t"===lu},sn=function(t){return t.length},an=cr("Quoted string"),fn='"',cn=ar('"',!1),ln=function(t){return t},hn="'",pn=ar("'",!1),_n=cr("Double quoted string char"),dn=function(){return or()},gn=function(t){return t},vn=cr("Single quoted string char"),yn=cr("Escaped char"),An="0",bn=ar("0",!1),mn=/^[0-9]/,Tn=fr([["0","9"]],!1,!1),Cn=function(){return"\0"},kn=/^[nfrt]/,xn=fr(["n","f","r","t"],!1,!1),On=function(t){return"\\"+t},wn="b",Sn=ar("b",!1),Vn=function(){return"\v"},Nn=cr("Boolean"),jn="true",Hn=ar("true",!1),Pn=function(){return!0},Ln="false",En=ar("false",!1),In=function(){return!1},Mn=cr("Number"),Dn=/^[+\-]/,Gn=fr(["+","-"],!1,!1),$n=function(t,e){return"-"===t?-e:e},Fn="0x",Bn=ar("0x",!0),zn=/^[0-9a-f]/i,Zn=fr([["0","9"],["a","f"]],!1,!0),Rn=function(){return parseInt(or(),16)},Un=/^[0-7]/,qn=fr([["0","7"]],!1,!1),Qn=function(){return parseInt(or(),8)},Wn=function(){return parseFloat(or())},Jn=/^[1-9]/,Kn=fr([["1","9"]],!1,!1),Xn="e",Yn=ar("e",!0),tr=0,er=0,nr=[{line:1,column:1}],rr=0,ur=[],ir=0;if("startRule"in t){if(!(t.startRule in n))throw new Error("Can't start parsing from rule \""+t.startRule+'".');r=n[t.startRule]}function or(){return v.substring(er,tr)}function sr(){return hr(er,tr)}function ar(t,e){return{type:"literal",text:t,ignoreCase:e}}function fr(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function cr(t){return{type:"other",description:t}}function lr(t){var e,n=nr[t];if(n)return n;for(e=t-1;!nr[e];)e--;for(n={line:(n=nr[e]).line,column:n.column};e<t;)10===v.charCodeAt(e)?(n.line++,n.column=1):n.column++,e++;return nr[t]=n}function hr(t,e){var n=lr(t),r=lr(e);return{start:{offset:t,line:n.line,column:n.column},end:{offset:e,line:r.line,column:r.column}}}function pr(t){tr<rr||(rr<tr&&(rr=tr,ur=[]),ur.push(t))}function _r(){var t,e,n,r,u,i,o;if(t=tr,(e=function(){var t,e,n,r,u,i,o,s,a,f,c;if(t=tr,v.substr(tr,2)===l?(e=l,tr+=2):(e=y,0===ir&&pr(h)),e!==y){for(n=[],r=Kr();r!==y;)n.push(r),r=Kr();if(n!==y)if((r=Wr())!==y){if(u=tr,i=[],(o=Kr())!==y)for(;o!==y;)i.push(o),o=Kr();else i=y;if(i!==y)if((o=Wr())!==y){for(ir++,a=s=tr,f=[],c=Kr();c!==y;)f.push(c),c=Kr();f!==y?(61===v.charCodeAt(tr)?(c=p,tr++):(c=y,0===ir&&pr(_)),c!==y?a=f=[f,c]:(tr=a,a=y)):(tr=a,a=y),ir--,a===y?s=void 0:(tr=s,s=y),s!==y?(er=u,i=d(r,o),u=i):(tr=u,u=y)}else tr=u,u=y;else tr=u,u=y;if(u===y&&(u=null),u!==y){if(i=[],o=tr,s=[],(a=Kr())!==y)for(;a!==y;)s.push(a),a=Kr();else s=y;for(s!==y&&(a=dr())!==y?(er=o,s=g(r,u,a),o=s):(tr=o,o=y);o!==y;){if(i.push(o),o=tr,s=[],(a=Kr())!==y)for(;a!==y;)s.push(a),a=Kr();else s=y;s!==y&&(a=dr())!==y?(er=o,s=g(r,u,a),o=s):(tr=o,o=y)}i!==y&&(o=Jr())!==y?(er=t,e=A(r,u,i),t=e):(tr=t,t=y)}else tr=t,t=y}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;return t}())===y&&(e=null),e!==y){for(n=[],r=qr();r!==y;)n.push(r),r=qr();if(n!==y)if((r=function(){var t,e,n,r,u,i;if(t=tr,(e=gr())!==y){for(n=[],r=tr,(u=yr())!==y&&(i=gr())!==y?(er=r,u=a(e,i),r=u):(tr=r,r=y);r!==y;)n.push(r),r=tr,(u=yr())!==y&&(i=gr())!==y?(er=r,u=a(e,i),r=u):(tr=r,r=y);n!==y?(er=t,e=f(e,n),t=e):(tr=t,t=y)}else tr=t,t=y;return t}())===y&&(r=null),r!==y){for(u=[],i=qr();i!==y;)u.push(i),i=qr();if(u!==y){for(i=[],o=Kr();o!==y;)i.push(o),o=Kr();i!==y?(er=t,t=e=s(e,r)):(tr=t,t=y)}else tr=t,t=y}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;return t}function dr(){var t,e,n,r,u,i,o,s,a,f;if(t=tr,(e=Wr())!==y){for(n=[],r=Kr();r!==y;)n.push(r),r=Kr();if(n!==y)if(61===v.charCodeAt(tr)?(r=p,tr++):(r=y,0===ir&&pr(_)),r!==y){for(u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y){for(o=[],a=s=i=tr,ir++,(f=Kr())===y&&(f=Jr()),ir--,f===y?a=void 0:(tr=a,a=y),a!==y?(v.length>tr?(f=v.charAt(tr),tr++):(f=y,0===ir&&pr(c)),f!==y?s=a=[a,f]:(tr=s,s=y)):(tr=s,s=y);s!==y;)o.push(s),a=s=tr,ir++,(f=Kr())===y&&(f=Jr()),ir--,f===y?a=void 0:(tr=a,a=y),a!==y?(v.length>tr?(f=v.charAt(tr),tr++):(f=y,0===ir&&pr(c)),f!==y?s=a=[a,f]:(tr=s,s=y)):(tr=s,s=y);(i=o!==y?v.substring(i,tr):o)!==y?(er=t,t=e=b(e,i)):(tr=t,t=y)}else tr=t,t=y}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;return t}function gr(){var t,e,n,r,u,i;if(u=t=tr,(i=function(){var t,e,n,r,u,i,o,s,a,f,c,l,h,p,_,d,g;if(t=tr,(e=Ar())===y&&(e=null),e!==y)if((n=br())===y&&(n=null),n!==y)if((r=Wr())===y&&(r=null),r!==y){for(u=[],i=mr();i!==y;)u.push(i),i=mr();if(u!==y)if(_=tr,35===v.charCodeAt(tr)?(d=I,tr++):(d=y,0===ir&&pr(M)),d!==y&&(g=Wr())!==y?(er=_,d=F(g),_=d):(tr=_,_=y),(i=_)===y&&(i=null),i!==y){for(o=[],s=mr();s!==y;)o.push(s),s=mr();o!==y?(er=tr,(s=(s=j(n,r,u,i,o))?void 0:y)!==y?((a=Vr())===y&&(a=null),a!==y?(c=tr,64===v.charCodeAt(tr)?(l=Z,tr++):(l=y,0===ir&&pr(R)),l!==y&&(h=Wr())!==y?((p=function(){var t,e,n,r,u,i,o,s;if(t=tr,40===v.charCodeAt(tr)?(e=q,tr++):(e=y,0===ir&&pr(Q)),e!==y){for(n=[],r=Kr();r!==y;)n.push(r),r=Kr();if(n!==y)if((r=Tr())!==y){if(u=[],i=tr,o=[],(s=Kr())!==y)for(;s!==y;)o.push(s),s=Kr();else o=y;for(o!==y&&(s=Tr())!==y?(er=i,o=W(r,s),i=o):(tr=i,i=y);i!==y;){if(u.push(i),i=tr,o=[],(s=Kr())!==y)for(;s!==y;)o.push(s),s=Kr();else o=y;o!==y&&(s=Tr())!==y?(er=i,o=W(r,s),i=o):(tr=i,i=y)}if(u!==y){for(i=[],o=Kr();o!==y;)i.push(o),o=Kr();i!==y?(41===v.charCodeAt(tr)?(o=J,tr++):(o=y,0===ir&&pr(K)),o!==y?(er=t,e=X(r,u),t=e):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;return t}())===y&&(p=null),p!==y?(er=c,l=U(h,p),c=l):(tr=c,c=y)):(tr=c,c=y),(f=c)===y&&(f=null),f!==y?(er=t,e=H(n,r,u,i,o,a,f),t=e):(tr=t,t=y)):(tr=t,t=y)):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;else tr=t,t=y;else tr=t,t=y;return t===y&&(t=tr,(e=br())===y&&(e=null),e!==y?(124===v.charCodeAt(tr)?(n=P,tr++):(n=y,0===ir&&pr(L)),n!==y?((r=Vr())===y&&(r=null),r!==y?(er=t,e=E(e,r),t=e):(tr=t,t=y)):(tr=t,t=y)):(tr=t,t=y),t===y&&(t=tr,35===v.charCodeAt(tr)?(e=I,tr++):(e=y,0===ir&&pr(M)),e!==y&&(er=t,e=D()),t=e)),t}())!==y&&(er=u,i=m(i)),(e=u=i)!==y){for(n=[],r=vr();r!==y;)n.push(r),r=vr();n!==y?(er=t,t=e=o(e,n)):(tr=t,t=y)}else tr=t,t=y;return t}function vr(){var t,e,n,r,u;if(t=tr,(e=yr())!==y&&(n=Ar())!==y?(er=tr,(r=(r=i(n))?void 0:y)!==y&&(u=gr())!==y?(er=t,t=e=T(n,u)):(tr=t,t=y)):(tr=t,t=y),t===y){if(t=tr,(e=Kr())===y&&(e=null),e!==y)if(C.test(v.charAt(tr))?(n=v.charAt(tr),tr++):(n=y,0===ir&&pr(k)),n!==y){if(r=[],(u=Kr())!==y)for(;u!==y;)r.push(u),u=Kr();else r=y;r!==y&&(u=gr())!==y?(er=t,t=e=x(u)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y;if(t===y){if(t=tr,(e=Kr())===y&&(e=null),e!==y)if(43===v.charCodeAt(tr)?(n=O,tr++):(n=y,0===ir&&pr(w)),n!==y){if(r=[],(u=Kr())!==y)for(;u!==y;)r.push(u),u=Kr();else r=y;r!==y&&(u=gr())!==y?(er=t,t=e=S(u)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y;t===y&&(t=tr,(e=function(){var t,e,n,r,u,i,o;for(t=tr,e=[],n=Kr();n!==y;)e.push(n),n=Kr();if(e!==y)if(v.substr(tr,2)===Y?(n=Y,tr+=2):(n=y,0===ir&&pr(tt)),n!==y)if(er=tr,(r=(r=et())?void 0:y)!==y){for(u=[],i=Kr();i!==y;)u.push(i),i=Kr();u!==y&&(i=Jr())!==y&&(o=Cr())!==y?(er=t,e=nt(o),t=e):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y;else tr=t,t=y;if(t===y){for(t=tr,e=[],n=Kr();n!==y;)e.push(n),n=Kr();if(e!==y)if(46===v.charCodeAt(tr)?(n=B,tr++):(n=y,0===ir&&pr(z)),n!==y)if(er=tr,(r=(r=rt())?void 0:y)!==y){for(u=[],i=Kr();i!==y;)u.push(i),i=Kr();u!==y&&(i=Jr())!==y&&(o=Cr())!==y?(er=t,e=nt(o),t=e):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y;else tr=t,t=y;t===y&&(t=tr,(e=Kr())!==y?(ir++,r=n=tr,ut.test(v.charAt(tr))?(u=v.charAt(tr),tr++):(u=y,0===ir&&pr(it)),u!==y&&(i=Kr())!==y?r=u=[u,i]:(tr=r,r=y),ir--,r===y?n=void 0:(tr=n,n=y),n!==y&&(r=xr())!==y?(er=t,e=ot(r),t=e):(tr=t,t=y)):(tr=t,t=y))}return t}())!==y&&(er=t,e=V(e)),t=e)}}return t}function yr(){var t,e,n,r,u;for(t=tr,e=[],n=Kr();n!==y;)e.push(n),n=Kr();if(e!==y)if((n=Jr())!==y){for(r=[],u=qr();u!==y;)r.push(u),u=qr();r!==y?(er=t,t=e=N()):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y;return t}function Ar(){var t,e;return t=tr,(e=function(){var t,e,n,r;if(ir++,e=t=tr,n=[],32===v.charCodeAt(tr)?(r=Je,tr++):(r=y,0===ir&&pr(Ke)),r!==y)for(;r!==y;)n.push(r),32===v.charCodeAt(tr)?(r=Je,tr++):(r=y,0===ir&&pr(Ke));else n=y;if((e=n!==y?v.substring(e,tr):n)!==y?(er=tr,(n=(n=rn(e))?void 0:y)!==y?(er=t,e=un(e),t=e):(tr=t,t=y)):(tr=t,t=y),t===y){if(e=t=tr,n=[],9===v.charCodeAt(tr)?(r=Qe,tr++):(r=y,0===ir&&pr(We)),r!==y)for(;r!==y;)n.push(r),9===v.charCodeAt(tr)?(r=Qe,tr++):(r=y,0===ir&&pr(We));else n=y;(e=n!==y?v.substring(e,tr):n)!==y?(er=tr,(n=(n=on(e))?void 0:y)!==y?(er=t,e=sn(e),t=e):(tr=t,t=y)):(tr=t,t=y)}return ir--,t===y&&(e=y,0===ir&&pr(nn)),t}())!==y&&(er=t,e=u(e)),t=e}function br(){var t,e,n,r,u;return t=tr,(e=Wr())!==y?(58===v.charCodeAt(tr)?(n=G,tr++):(n=y,0===ir&&pr($)),n!==y?(r=tr,ir++,u=Kr(),ir--,u===y?r=void 0:(tr=r,r=y),r!==y?(er=t,t=e=F(e)):(tr=t,t=y)):(tr=t,t=y)):(tr=t,t=y),t}function mr(){var t,e,n;return t=tr,46===v.charCodeAt(tr)?(e=B,tr++):(e=y,0===ir&&pr(z)),e!==y&&(n=Wr())!==y?(er=t,t=e=F(n)):(tr=t,t=y),t}function Tr(){var t;return(t=Rr())===y&&(t=Zr()),t}function Cr(){var t,e,n,r,u;if(t=tr,(e=kr())!==y){for(n=[],r=tr,Jr()!==y&&(u=kr())!==y?(er=r,r=st(e,u)):(tr=r,r=y);r!==y;)n.push(r),r=tr,Jr()!==y&&(u=kr())!==y?(er=r,r=st(e,u)):(tr=r,r=y);n!==y?(er=t,t=e=at(e,n)):(tr=t,t=y)}else tr=t,t=y;return t}function kr(){var t,e,n,r,u,i;for(ir++,e=t=tr,n=[],r=Kr();r!==y;)n.push(r),r=Kr();if((e=n!==y?v.substring(e,tr):n)!==y?(er=tr,(n=(n=ct(e))?void 0:y)!==y&&(r=xr())!==y?(er=t,t=e=lt(e,r)):(tr=t,t=y)):(tr=t,t=y),t===y){for(n=e=t=tr,r=[],u=Kr();u!==y;)r.push(u),u=Kr();r!==y?(u=tr,ir++,i=Jr(),ir--,i!==y?(tr=u,u=void 0):u=y,u!==y?(er=n,n=r=ht(r)):(tr=n,n=y)):(tr=n,n=y),(e=n!==y?v.substring(e,tr):n)!==y&&(er=t,e=pt(e)),t=e}return ir--,t===y&&(e=y,0===ir&&pr(ft)),t}function xr(){var t,e;if(ir++,t=[],(e=Or())===y&&(e=Sr()),e!==y)for(;e!==y;)t.push(e),(e=Or())===y&&(e=Sr());else t=y;return ir--,t===y&&(e=y,0===ir&&pr(_t)),t}function Or(){var t,e,n,r;return t=tr,(e=wr())===y&&(e=tr,v.substr(tr,2)===dt?(n=dt,tr+=2):(n=y,0===ir&&pr(gt)),n!==y&&(r=wr())!==y?(er=e,e=n=vt(r)):(tr=e,e=y),e===y&&(e=tr,92===v.charCodeAt(tr)?(n=yt,tr++):(n=y,0===ir&&pr(At)),n!==y&&(r=wr())!==y?(er=e,e=n=bt(r)):(tr=e,e=y))),e!==y&&(er=t,e=mt(e)),t=e}function wr(){var t,e,n,r,u;if(e=[],r=n=t=tr,ir++,(u=Jr())===y&&(36===v.charCodeAt(tr)?(u=Tt,tr++):(u=y,0===ir&&pr(Ct)),u===y&&(92===v.charCodeAt(tr)?(u=yt,tr++):(u=y,0===ir&&pr(At)))),ir--,u===y?r=void 0:(tr=r,r=y),r!==y?(v.length>tr?(u=v.charAt(tr),tr++):(u=y,0===ir&&pr(c)),u!==y?n=r=[r,u]:(tr=n,n=y)):(tr=n,n=y),n!==y)for(;n!==y;)e.push(n),r=n=tr,ir++,(u=Jr())===y&&(36===v.charCodeAt(tr)?(u=Tt,tr++):(u=y,0===ir&&pr(Ct)),u===y&&(92===v.charCodeAt(tr)?(u=yt,tr++):(u=y,0===ir&&pr(At)))),ir--,u===y?r=void 0:(tr=r,r=y),r!==y?(v.length>tr?(u=v.charAt(tr),tr++):(u=y,0===ir&&pr(c)),u!==y?n=r=[r,u]:(tr=n,n=y)):(tr=n,n=y);else e=y;return t=e!==y?v.substring(t,tr):e}function Sr(){var t,e,n,r,u;return t=tr,36===v.charCodeAt(tr)?(e=Tt,tr++):(e=y,0===ir&&pr(Ct)),e!==y&&(n=zr())!==y?(r=tr,ir++,40===v.charCodeAt(tr)?(u=q,tr++):(u=y,0===ir&&pr(Q)),ir--,u===y?r=void 0:(tr=r,r=y),r!==y?(er=t,t=e=kt(n)):(tr=t,t=y)):(tr=t,t=y),t===y&&(t=tr,36===v.charCodeAt(tr)?(e=Tt,tr++):(e=y,0===ir&&pr(Ct)),e!==y?((n=Mr())===y&&(n=null),n!==y?(er=t,t=e=xt(n)):(tr=t,t=y)):(tr=t,t=y)),t}function Vr(){var t,e,n,r,u,i;if(t=tr,(e=Nr())!==y){for(n=[],r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();for(u!==y&&(i=Nr())!==y?(er=r,r=u=Ot(e,i)):(tr=r,r=y);r!==y;){for(n.push(r),r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();u!==y&&(i=Nr())!==y?(er=r,r=u=Ot(e,i)):(tr=r,r=y)}n!==y?(er=t,t=e=f(e,n)):(tr=t,t=y)}else tr=t,t=y;return t}function Nr(){var t,e,n,r,u,i,o,s,a,f,c;for(t=tr,e=[],n=Kr();n!==y;)e.push(n),n=Kr();if(e!==y)if(40===v.charCodeAt(tr)?(n=q,tr++):(n=y,0===ir&&pr(Q)),n!==y){for(r=[],u=Kr();u!==y;)r.push(u),u=Kr();if(r!==y)if((u=Hr())!==y){for(i=[],o=Kr();o!==y;)i.push(o),o=Kr();i!==y?(41===v.charCodeAt(tr)?(o=J,tr++):(o=y,0===ir&&pr(K)),o!==y?((s=Lr())===y&&(s=null),s!==y?(er=t,t=e=wt(u,s)):(tr=t,t=y)):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;else tr=t,t=y;if(t===y){for(t=tr,e=[],n=Kr();n!==y;)e.push(n),n=Kr();if(e!==y)if(40===v.charCodeAt(tr)?(n=q,tr++):(n=y,0===ir&&pr(Q)),n!==y)if((r=Jr())!==y)if((u=function(){var t,e,n,r,u,i,o;if(t=tr,(e=jr())!==y){for(n=[],r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();for(u!==y&&(i=Jr())!==y&&(o=jr())!==y?(er=r,u=Nt(e,o),r=u):(tr=r,r=y);r!==y;){for(n.push(r),r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();u!==y&&(i=Jr())!==y&&(o=jr())!==y?(er=r,u=Nt(e,o),r=u):(tr=r,r=y)}n!==y?(er=t,e=jt(e,n),t=e):(tr=t,t=y)}else tr=t,t=y;return t}())!==y){for(i=[],o=Kr();o!==y;)i.push(o),o=Kr();if(i!==y)if((o=Jr())!==y){for(s=tr,a=[],f=Kr();f!==y;)a.push(f),f=Kr();(s=a!==y?v.substring(s,tr):a)!==y?(er=tr,(a=(a=St(u,s))?void 0:y)!==y?(41===v.charCodeAt(tr)?(f=J,tr++):(f=y,0===ir&&pr(K)),f!==y?((c=Lr())===y&&(c=null),c!==y?(er=t,t=e=Vt(u,s,c)):(tr=t,t=y)):(tr=t,t=y)):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;else tr=t,t=y;else tr=t,t=y;else tr=t,t=y}return t}function jr(){var t,e,n,r;if(e=t=tr,n=[],(r=Kr())!==y)for(;r!==y;)n.push(r),r=Kr();else n=y;return(e=n!==y?v.substring(e,tr):n)!==y?(er=tr,(n=(n=Ht(e))?void 0:y)!==y&&(r=Hr())!==y?(er=t,t=e=Pt(e,r)):(tr=t,t=y)):(tr=t,t=y),t}function Hr(){var t,e,n,r,u,i,o,s;if(t=tr,(e=Pr())!==y){for(n=[],r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(44===v.charCodeAt(tr)?(i=Lt,tr++):(i=y,0===ir&&pr(Et)),i===y&&(i=null),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y&&(s=Pr())!==y?(er=r,r=u=It(e,s)):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y;for(;r!==y;){for(n.push(r),r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(44===v.charCodeAt(tr)?(i=Lt,tr++):(i=y,0===ir&&pr(Et)),i===y&&(i=null),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y&&(s=Pr())!==y?(er=r,r=u=It(e,s)):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y}n!==y?(er=t,t=e=f(e,n)):(tr=t,t=y)}else tr=t,t=y;return t}function Pr(){var t,e,n,r,u,i,o,s;if(ir++,t=tr,(e=br())!==y)if((n=Wr())!==y){for(ir++,u=r=tr,i=[],o=Kr();o!==y;)i.push(o),o=Kr();i!==y?(61===v.charCodeAt(tr)?(o=p,tr++):(o=y,0===ir&&pr(_)),o!==y?u=i=[i,o]:(tr=u,u=y)):(tr=u,u=y),ir--,u===y?r=void 0:(tr=r,r=y),r!==y?(er=t,t=e=Dt(e,n)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y;if(t===y){if(t=tr,(e=br())===y&&(e=null),e!==y)if((n=Wr())!==y){for(r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(61===v.charCodeAt(tr)?(i=p,tr++):(i=y,0===ir&&pr(_)),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y&&(s=Er())!==y?(er=r,r=u=Gt(e,n,s)):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y;r!==y?(er=t,t=e=$t(e,n,r)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y;if(t===y){for(e=t=tr,n=[],r=Kr();r!==y;)n.push(r),r=Kr();n!==y&&(r=Er())!==y?(er=e,e=n=Ft(r)):(tr=e,e=y),e!==y&&(er=t,e=Bt(e)),t=e}}return ir--,t===y&&(e=y,0===ir&&pr(Mt)),t}function Lr(){var t,e,n,r,u,i,o,s,a,f;for(ir++,t=tr,e=[],n=Kr();n!==y;)e.push(n),n=Kr();if(e!==y)if(38===v.charCodeAt(tr)?(n=Zt,tr++):(n=y,0===ir&&pr(Rt)),n!==y){for(ir++,u=r=tr,i=[],Ut.test(v.charAt(tr))?(o=v.charAt(tr),tr++):(o=y,0===ir&&pr(qt));o!==y;)i.push(o),Ut.test(v.charAt(tr))?(o=v.charAt(tr),tr++):(o=y,0===ir&&pr(qt));if(i!==y?(59===v.charCodeAt(tr)?(o=Qt,tr++):(o=y,0===ir&&pr(Wt)),o!==y?u=i=[i,o]:(tr=u,u=y)):(tr=u,u=y),ir--,u===y?r=void 0:(tr=r,r=y),r!==y){for(u=[],i=Kr();i!==y;)u.push(i),i=Kr();u!==y&&(i=Wr())!==y?(o=tr,40===v.charCodeAt(tr)?(s=q,tr++):(s=y,0===ir&&pr(Q)),s!==y&&(a=Hr())!==y?(41===v.charCodeAt(tr)?(f=J,tr++):(f=y,0===ir&&pr(K)),f!==y?(er=o,o=s=Jt(i,a)):(tr=o,o=y)):(tr=o,o=y),o===y&&(o=null),o!==y?(er=t,t=e=Kt(i,o)):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y}else tr=t,t=y;else tr=t,t=y;return ir--,t===y&&(e=y,0===ir&&pr(zt)),t}function Er(){var t,e,n,r,u,i,o,s;if(t=tr,(e=Ir())!==y){for(n=[],r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(43===v.charCodeAt(tr)?(i=O,tr++):(i=y,0===ir&&pr(w)),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y&&(s=Ir())!==y?(er=r,r=u=Xt(e,s)):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y;for(;r!==y;){for(n.push(r),r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(43===v.charCodeAt(tr)?(i=O,tr++):(i=y,0===ir&&pr(w)),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y&&(s=Ir())!==y?(er=r,r=u=Xt(e,s)):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y}n!==y?(er=t,t=e=f(e,n)):(tr=t,t=y)}else tr=t,t=y;return t}function Ir(){var t;return ir++,(t=Mr())===y&&(t=Rr()),ir--,t===y&&0===ir&&pr(Yt),t}function Mr(){var t,e,n,r,u,i,o;if(t=tr,(e=Wr())===y&&(e=null),e!==y)if(40===v.charCodeAt(tr)?(n=q,tr++):(n=y,0===ir&&pr(Q)),n!==y){for(r=[],u=Kr();u!==y;)r.push(u),u=Kr();if(r!==y)if((u=function(){var t,e,n,r,u,i,o,s;if(t=tr,(e=Dr())!==y){for(n=[],r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(44===v.charCodeAt(tr)?(i=Lt,tr++):(i=y,0===ir&&pr(Et)),i===y&&(i=null),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y&&(s=Dr())!==y?(er=r,u=ee(e,s),r=u):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y;for(;r!==y;){for(n.push(r),r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(44===v.charCodeAt(tr)?(i=Lt,tr++):(i=y,0===ir&&pr(Et)),i===y&&(i=null),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y&&(s=Dr())!==y?(er=r,u=ee(e,s),r=u):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y}n!==y?(er=t,e=ne(e,n),t=e):(tr=t,t=y)}else tr=t,t=y;return t}())!==y){for(i=[],o=Kr();o!==y;)i.push(o),o=Kr();i!==y?(41===v.charCodeAt(tr)?(o=J,tr++):(o=y,0===ir&&pr(K)),o!==y?(er=t,t=e=te(e,u)):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;else tr=t,t=y;return t}function Dr(){var t,e,n,r,u,i;if(t=tr,(e=Wr())!==y){for(n=[],r=Kr();r!==y;)n.push(r),r=Kr();if(n!==y)if(61===v.charCodeAt(tr)?(r=p,tr++):(r=y,0===ir&&pr(_)),r!==y){for(u=[],i=Kr();i!==y;)u.push(i),i=Kr();u!==y&&(i=Ur())!==y?(er=t,t=e=re(e,i)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;return t===y&&(t=tr,(e=Ur())!==y&&(er=t,e=ue(e)),t=e),t}function Gr(){var t,e,n,r,u,i,o,s,a;if(t=tr,(e=Wr())!==y)if(40===v.charCodeAt(tr)?(n=q,tr++):(n=y,0===ir&&pr(Q)),n!==y){for(r=[],u=Kr();u!==y;)r.push(u),u=Kr();if(r!==y)if((u=Rr())!==y){for(i=[],o=tr,s=[],a=Kr();a!==y;)s.push(a),a=Kr();for(s!==y&&(a=Rr())!==y?(er=o,o=s=se(e,u,a)):(tr=o,o=y);o!==y;){for(i.push(o),o=tr,s=[],a=Kr();a!==y;)s.push(a),a=Kr();s!==y&&(a=Rr())!==y?(er=o,o=s=se(e,u,a)):(tr=o,o=y)}if(i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y?(41===v.charCodeAt(tr)?(s=J,tr++):(s=y,0===ir&&pr(K)),s!==y?(er=t,t=e=ae(e,u,i)):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y}else tr=t,t=y;else tr=t,t=y}else tr=t,t=y;else tr=t,t=y;return t}function $r(){var t,e;return t=tr,(e=function(){var t,e,n,r,u;if(ir++,t=tr,34===v.charCodeAt(tr)?(e=fn,tr++):(e=y,0===ir&&pr(cn)),e!==y){for(n=tr,r=[],u=Xr();u!==y;)r.push(u),u=Xr();(n=r!==y?v.substring(n,tr):r)!==y?(34===v.charCodeAt(tr)?(r=fn,tr++):(r=y,0===ir&&pr(cn)),r!==y?(er=t,e=ln(n),t=e):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y;if(t===y)if(t=tr,39===v.charCodeAt(tr)?(e=hn,tr++):(e=y,0===ir&&pr(pn)),e!==y){for(n=tr,r=[],u=Yr();u!==y;)r.push(u),u=Yr();(n=r!==y?v.substring(n,tr):r)!==y?(39===v.charCodeAt(tr)?(r=hn,tr++):(r=y,0===ir&&pr(pn)),r!==y?(er=t,e=ln(n),t=e):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y;return ir--,t===y&&(e=y,0===ir&&pr(an)),t}())!==y&&(er=t,e=fe(e)),t=e}function Fr(){var t,e,n,r,u;return ir++,n=t=tr,Dn.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(Gn)),r===y&&(r=null),r!==y&&(u=function(){var t,e,n,r,u;if(t=tr,v.substr(tr,2).toLowerCase()===Fn?(e=v.substr(tr,2),tr+=2):(e=y,0===ir&&pr(Bn)),e!==y){if(n=[],zn.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(Zn)),r!==y)for(;r!==y;)n.push(r),zn.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(Zn));else n=y;n!==y?(er=t,e=Rn(),t=e):(tr=t,t=y)}else tr=t,t=y;if(t===y){if(t=tr,48===v.charCodeAt(tr)?(e=An,tr++):(e=y,0===ir&&pr(bn)),e!==y){if(n=[],Un.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(qn)),r!==y)for(;r!==y;)n.push(r),Un.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(qn));else n=y;n!==y?(er=t,e=Qn(),t=e):(tr=t,t=y)}else tr=t,t=y;if(t===y){if(t=tr,(e=eu())===y&&(e=null),e!==y)if(46===v.charCodeAt(tr)?(n=B,tr++):(n=y,0===ir&&pr(z)),n!==y){if(r=[],mn.test(v.charAt(tr))?(u=v.charAt(tr),tr++):(u=y,0===ir&&pr(Tn)),u!==y)for(;u!==y;)r.push(u),mn.test(v.charAt(tr))?(u=v.charAt(tr),tr++):(u=y,0===ir&&pr(Tn));else r=y;r!==y?((u=nu())===y&&(u=null),u!==y?(er=t,e=Wn(),t=e):(tr=t,t=y)):(tr=t,t=y)}else tr=t,t=y;else tr=t,t=y;t===y&&(t=tr,(e=eu())!==y?((n=nu())===y&&(n=null),n!==y?(er=t,e=Wn(),t=e):(tr=t,t=y)):(tr=t,t=y))}}return t}())!==y?(er=n,r=$n(r,u),n=r):(tr=n,n=y),ir--,n===y&&(r=y,0===ir&&pr(Mn)),(e=n)!==y&&(er=t,e=ce(e)),t=e}function Br(){var t,e,n,r;return ir++,n=t=tr,v.substr(tr,4)===jn?(r=jn,tr+=4):(r=y,0===ir&&pr(Hn)),r!==y&&(er=n,r=Pn()),(n=r)===y&&(n=tr,v.substr(tr,5)===Ln?(r=Ln,tr+=5):(r=y,0===ir&&pr(En)),r!==y&&(er=n,r=In()),n=r),ir--,n===y&&(r=y,0===ir&&pr(Nn)),(e=n)!==y&&(er=t,e=le(e)),t=e}function zr(){var t,e;return t=tr,(e=Qr())!==y&&(er=t,e=de(e)),t=e}function Zr(){var t,e;return ir++,t=tr,v.substr(tr,2)===be?(e=be,tr+=2):(e=y,0===ir&&pr(me)),e===y&&(v.substr(tr,2)===Te?(e=Te,tr+=2):(e=y,0===ir&&pr(Ce)),e===y&&(v.substr(tr,2)===ke?(e=ke,tr+=2):(e=y,0===ir&&pr(xe)),e===y&&(62===v.charCodeAt(tr)?(e=Oe,tr++):(e=y,0===ir&&pr(we)),e===y&&(60===v.charCodeAt(tr)?(e=Se,tr++):(e=y,0===ir&&pr(Ve)),e===y&&(v.substr(tr,2)===Ne?(e=Ne,tr+=2):(e=y,0===ir&&pr(je))))))),e!==y&&(er=t,e=He()),ir--,(t=e)===y&&(e=y,0===ir&&pr(Ae)),t}function Rr(){var t,e,n;return(t=$r())===y&&(t=Fr())===y&&(t=Br())===y&&(e=tr,v.substr(tr,4)===he?(n=he,tr+=4):(n=y,0===ir&&pr(pe)),n!==y&&(er=e,n=_e()),(t=e=n)===y&&(t=zr())===y&&(t=function(){var t,e,n,r;if(e=t=tr,n=[],ge.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(ve)),r!==y)for(;r!==y;)n.push(r),ge.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(ve));else n=y;return(e=n!==y?v.substring(e,tr):n)!==y&&(n=Qr())!==y?(er=t,t=e=ye(e,n)):(tr=t,t=y),t}())),t}function Ur(){var t;return(t=function(){var t,e,n,r,u,i,o,s;if(t=tr,(e=Rr())!==y){for(n=[],r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(124===v.charCodeAt(tr)?(i=P,tr++):(i=y,0===ir&&pr(L)),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y?((s=Gr())===y&&(s=Rr()),s!==y?(er=r,r=u=ie(e,s)):(tr=r,r=y)):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y;if(r!==y)for(;r!==y;){for(n.push(r),r=tr,u=[],i=Kr();i!==y;)u.push(i),i=Kr();if(u!==y)if(124===v.charCodeAt(tr)?(i=P,tr++):(i=y,0===ir&&pr(L)),i!==y){for(o=[],s=Kr();s!==y;)o.push(s),s=Kr();o!==y?((s=Gr())===y&&(s=Rr()),s!==y?(er=r,r=u=ie(e,s)):(tr=r,r=y)):(tr=r,r=y)}else tr=r,r=y;else tr=r,r=y}else n=y;n!==y?(er=t,t=e=oe(e,n)):(tr=t,t=y)}else tr=t,t=y;return t}())===y&&(t=Rr())===y&&(t=Zr()),t}function qr(){var t,e,n;for(ir++,t=tr,e=[],n=Kr();n!==y;)e.push(n),n=Kr();return e!==y&&(n=Jr())!==y?t=e=[e,n]:(tr=t,t=y),ir--,t===y&&(e=y,0===ir&&pr(Pe)),t}function Qr(){var t,e,n,r,u,i,o;if(ir++,e=t=tr,(n=Wr())!==y){for(r=[],u=tr,46===v.charCodeAt(tr)?(i=B,tr++):(i=y,0===ir&&pr(z)),i!==y&&(o=Wr())!==y?u=i=[i,o]:(tr=u,u=y);u!==y;)r.push(u),u=tr,46===v.charCodeAt(tr)?(i=B,tr++):(i=y,0===ir&&pr(z)),i!==y&&(o=Wr())!==y?u=i=[i,o]:(tr=u,u=y);r!==y?e=n=[n,r]:(tr=e,e=y)}else tr=e,e=y;return t=e!==y?v.substring(t,tr):e,ir--,t===y&&(e=y,0===ir&&pr(Le)),t}function Wr(){var t,e,n,r,u;if(ir++,t=tr,Ee.test(v.charAt(tr))?(e=v.charAt(tr),tr++):(e=y,0===ir&&pr(Ie)),e!==y){for(n=tr,r=[],Me.test(v.charAt(tr))?(u=v.charAt(tr),tr++):(u=y,0===ir&&pr(De));u!==y;)r.push(u),Me.test(v.charAt(tr))?(u=v.charAt(tr),tr++):(u=y,0===ir&&pr(De));(n=r!==y?v.substring(n,tr):r)!==y?(er=t,t=e=Ge(e,n)):(tr=t,t=y)}else tr=t,t=y;return ir--,t===y&&(e=y,0===ir&&pr(Le)),t}function Jr(){var t;return ir++,10===v.charCodeAt(tr)?(t=Fe,tr++):(t=y,0===ir&&pr(Be)),t===y&&(13===v.charCodeAt(tr)?(t=ze,tr++):(t=y,0===ir&&pr(Ze)),t===y&&(v.substr(tr,2)===Re?(t=Re,tr+=2):(t=y,0===ir&&pr(Ue)))),ir--,t===y&&0===ir&&pr($e),t}function Kr(){var t;return ir++,9===v.charCodeAt(tr)?(t=Qe,tr++):(t=y,0===ir&&pr(We)),t===y&&(32===v.charCodeAt(tr)?(t=Je,tr++):(t=y,0===ir&&pr(Ke)),t===y&&(11===v.charCodeAt(tr)?(t=Xe,tr++):(t=y,0===ir&&pr(Ye)),t===y&&(12===v.charCodeAt(tr)?(t=tn,tr++):(t=y,0===ir&&pr(en))))),ir--,t===y&&0===ir&&pr(qe),t}function Xr(){var t,e,n;return ir++,e=t=tr,ir++,34===v.charCodeAt(tr)?(n=fn,tr++):(n=y,0===ir&&pr(cn)),n===y&&(92===v.charCodeAt(tr)?(n=yt,tr++):(n=y,0===ir&&pr(At)),n===y&&(n=Jr())),ir--,n===y?e=void 0:(tr=e,e=y),e!==y?(v.length>tr?(n=v.charAt(tr),tr++):(n=y,0===ir&&pr(c)),n!==y?(er=t,t=e=dn()):(tr=t,t=y)):(tr=t,t=y),t===y&&(t=tr,92===v.charCodeAt(tr)?(e=yt,tr++):(e=y,0===ir&&pr(At)),e!==y&&(n=tu())!==y?(er=t,t=e=gn(n)):(tr=t,t=y)),ir--,t===y&&(e=y,0===ir&&pr(_n)),t}function Yr(){var t,e,n;return ir++,e=t=tr,ir++,39===v.charCodeAt(tr)?(n=hn,tr++):(n=y,0===ir&&pr(pn)),n===y&&(92===v.charCodeAt(tr)?(n=yt,tr++):(n=y,0===ir&&pr(At)),n===y&&(n=Jr())),ir--,n===y?e=void 0:(tr=e,e=y),e!==y?(v.length>tr?(n=v.charAt(tr),tr++):(n=y,0===ir&&pr(c)),n!==y?(er=t,t=e=dn()):(tr=t,t=y)):(tr=t,t=y),t===y&&(t=tr,92===v.charCodeAt(tr)?(e=yt,tr++):(e=y,0===ir&&pr(At)),e!==y&&(n=tu())!==y?(er=t,t=e=gn(n)):(tr=t,t=y)),ir--,t===y&&(e=y,0===ir&&pr(vn)),t}function tu(){var t,e,n,r;return ir++,t=tr,48===v.charCodeAt(tr)?(e=An,tr++):(e=y,0===ir&&pr(bn)),e!==y?(n=tr,ir++,mn.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(Tn)),ir--,r===y?n=void 0:(tr=n,n=y),n!==y?(er=t,t=e=Cn()):(tr=t,t=y)):(tr=t,t=y),t===y&&(34===v.charCodeAt(tr)?(t=fn,tr++):(t=y,0===ir&&pr(cn)),t===y&&(39===v.charCodeAt(tr)?(t=hn,tr++):(t=y,0===ir&&pr(pn)),t===y&&(92===v.charCodeAt(tr)?(t=yt,tr++):(t=y,0===ir&&pr(At)),t===y&&(t=tr,kn.test(v.charAt(tr))?(e=v.charAt(tr),tr++):(e=y,0===ir&&pr(xn)),e!==y&&(er=t,e=On(e)),(t=e)===y&&(t=tr,98===v.charCodeAt(tr)?(e=wn,tr++):(e=y,0===ir&&pr(Sn)),e!==y&&(er=t,e=Vn()),t=e))))),ir--,t===y&&(e=y,0===ir&&pr(yn)),t}function eu(){var t,e,n,r;if(t=tr,Jn.test(v.charAt(tr))?(e=v.charAt(tr),tr++):(e=y,0===ir&&pr(Kn)),e!==y){for(n=[],mn.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(Tn));r!==y;)n.push(r),mn.test(v.charAt(tr))?(r=v.charAt(tr),tr++):(r=y,0===ir&&pr(Tn));n!==y?t=e=[e,n]:(tr=t,t=y)}else tr=t,t=y;return t===y&&(48===v.charCodeAt(tr)?(t=An,tr++):(t=y,0===ir&&pr(bn))),t}function nu(){var t,e,n,r;return t=tr,v.substr(tr,1).toLowerCase()===Xn?(e=v.charAt(tr),tr++):(e=y,0===ir&&pr(Yn)),e!==y?(Dn.test(v.charAt(tr))?(n=v.charAt(tr),tr++):(n=y,0===ir&&pr(Gn)),n===y&&(n=null),n!==y&&(r=eu())!==y?t=e=[e,n,r]:(tr=t,t=y)):(tr=t,t=y),t}var ru,uu,iu,ou=[],su=t.ast,au=function(){return ou[ou.length-1]},fu=function(t){return t.reduce(function(t,e){for(t.push(e);t[t.length-1].sibling;){var n=t[t.length-1];t.push(n.sibling),delete n.sibling}return t},[])},cu=0,lu=null,hu=0;if((e=r())!==y&&tr===v.length)return e;throw e!==y&&tr<v.length&&pr({type:"end"}),ru=ur,uu=rr<v.length?v.charAt(rr):null,iu=rr<v.length?hr(rr,rr+1):hr(rr,rr),new pu(pu.buildMessage(ru,uu),ru,uu,iu)},l=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}(),o=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e};(t=c.NodeType||(c.NodeType={}))[t.Declaration=0]="Declaration",t[t.Tag=1]="Tag",t[t.TagExtra=2]="TagExtra",t[t.AttributeGroup=3]="AttributeGroup",t[t.Attribute=4]="Attribute",t[t.Setting=5]="Setting",t[t.StringValue=6]="StringValue",t[t.BooleanValue=7]="BooleanValue",t[t.NumberValue=8]="NumberValue",t[t.NullValue=9]="NullValue",t[t.IdentifierValue=10]="IdentifierValue",t[t.CompareOperator=11]="CompareOperator",t[t.Transformer=12]="Transformer",t[t.TransformValue=13]="TransformValue",t[t.Helper=14]="Helper",t[t.HelperAttribute=15]="HelperAttribute",t[t.StaticText=16]="StaticText",t[t.DynamicText=17]="DynamicText";var e=function(){function n(t,e){l(this,n),this._type=t,this._location=e}return r(n,[{key:"type",get:function(){return this._type}},{key:"location",get:function(){return this._location}}]),n}(),u=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,n));return r._name=t,r}return o(u,e),r(u,[{key:"name",get:function(){return this._name}}]),u}(),s=function(t){function e(){return l(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,u),e}(),a=function(t){function e(){return l(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,u),e}(),i=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,n));return r._value=t,r}return o(u,e),r(u,[{key:"toHTMLString",value:function(){return this._value+""}},{key:"value",get:function(){return this._value}}]),u}(),f=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.NodeType.StringValue,e))}return o(n,i),r(n,[{key:"toHTMLString",value:function(){return'"'+this._value.replace(/"/g,'\\"')+'"'}}]),n}(),p=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.NodeType.BooleanValue,e))}return o(n,i),n}(),_=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.NodeType.NumberValue,e))}return o(n,i),n}(),d=function(t){function e(t){return l(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,null,c.NodeType.NullValue,t))}return o(e,i),e}(),g=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.NodeType.IdentifierValue,e))}return o(n,i),n}(),v=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.NodeType.CompareOperator,e))}return o(n,i),n}(),y=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.NodeType.Transformer,n));return r._params=e||[],r}return o(u,s),r(u,[{key:"toHTMLString",value:function(){return this.name+"("+this._params.map(function(t){return t.toHTMLString()}).join(" ")+")"}},{key:"params",get:function(){return this._params}}]),u}(),A=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.NodeType.TransformValue,n));return r._transformers=e||[],r}return o(u,i),r(u,[{key:"toHTMLString",value:function(){return""+this._value.toHTMLString()+this._transformers.map(function(t){return" | "+t.toHTMLString()}).join("")}},{key:"transformers",get:function(){return this._transformers}}]),u}(),b=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.NodeType.HelperAttribute,n));return r._value=e,r}return o(u,a),r(u,[{key:"toHTMLString",value:function(){return(this.name?this.name+"=":"")+this.value.toHTMLString()}},{key:"value",get:function(){return this._value}}]),u}(),m=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.NodeType.Helper,n));return r._attributes=e||[],r}return o(u,a),r(u,[{key:"toHTMLString",value:function(){return(this.name?this.name:"")+"("+this._attributes.map(function(t){return t.toHTMLString()}).join(" ")+")"}},{key:"attributes",get:function(){return this._attributes}}]),u}(),T=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.NodeType.StaticText,e))}return o(n,i),r(n,[{key:"_merge",value:function(t){var e={start:this._location.start,end:t._location.end};this._value+=t._value,this._location=e}},{key:"toHTMLString",value:function(){return this.value}}]),n}(),C=function(t){function n(t,e){return l(this,n),h(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,c.NodeType.DynamicText,e))}return o(n,i),r(n,[{key:"toHTMLString",value:function(){return"$"+this.value.toHTMLString()}}]),n}(),k=function(t){function i(t,e,n,r){l(this,i);var u=h(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,null===e?void 0:e,c.NodeType.Attribute,r));return u._values=n||[],u._namespace=null===t?void 0:t,u}return o(i,a),r(i,[{key:"merge",value:function(t){return!(!this.name||this.name!==t.name||this.namespace!==t.namespace)&&(this._values=this._values.concat(t._values),!0)}},{key:"values",get:function(){return this._values}},{key:"namespace",get:function(){return this._namespace}}]),i}(),x=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.NodeType.Setting,n));return r._attributes=e||[],r}return o(u,s),r(u,[{key:"attributes",get:function(){return this._attributes}}]),u}(),O=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,c.NodeType.AttributeGroup,n));return r._setting=e,r._setAttributes(t||[]),r}return o(u,e),r(u,[{key:"_setAttributes",value:function(t){for(var r=t,u=0,e=function(){var n=r;r=[],n.forEach(function(t,e){e<=u?r.push(t):n[u].merge(t)||r.push(t)}),u++};u<r.length;)e();this._attributes=r}},{key:"merge",value:function(t){if(!(1<arguments.length&&void 0!==arguments[1]&&arguments[1])&&(t._setting||this._setting))return!1;var e={start:this._location.start,end:t._location.end};return this._setAttributes(this._attributes.concat(t._attributes)),this._location=e,!0}},{key:"attributes",get:function(){return this._attributes}},{key:"setting",get:function(){return this._setting}}]),u}(),w=function(t){function u(t,e,n){l(this,u);var r=h(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,t,c.NodeType.TagExtra,n));return r._values=e||[],r}return o(u,s),r(u,[{key:"values",get:function(){return this._values}}]),u}(),S=function(t){function f(t,e,n,r,u,i,o,s){l(this,f);var a=h(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,e,c.NodeType.Tag,s));return a._children=[],a._text=[],a._indent=t,a._namespace=n,a._dots=r||[],a._hash=u,a._extra=o,a._setGroup(i||[]),a}return o(f,a),r(f,[{key:"_setChildren",value:function(t){this._children=t}},{key:"_setText",value:function(t){this._text=(t||[]).map(function(t){return t.reduce(function(t,e){if(!t.length)return[e];if(e.type===c.NodeType.DynamicText)return t.concat(e);var n=t[t.length-1];return e.type===c.NodeType.StaticText&&n.type===c.NodeType.StaticText?(n._merge(e),t):t.concat(e)},[])})}},{key:"_setGroup",value:function(t){this._attributeGroups=t.reduce(function(t,e){return t.length?t[t.length-1].merge(e)?t:t.concat(e):[e]},[])}},{key:"indent",get:function(){return this._indent}},{key:"dots",get:function(){return this._dots}},{key:"hash",get:function(){return this._hash}},{key:"namespace",get:function(){return this._namespace}},{key:"children",get:function(){return this._children}},{key:"attributeGroups",get:function(){return this._attributeGroups}},{key:"extra",get:function(){return this._extra}},{key:"parent",get:function(){return this._parent}},{key:"text",get:function(){return this._text}}]),f}(),V=function(t){function i(t,e,n,r){l(this,i);var u=h(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,c.NodeType.Declaration,r));return u._options={},u._extension=e,n.forEach(function(t){return u._options[t.key]=t.value}),u}return o(i,s),r(i,[{key:"option",value:function(t){return this._options[t]}},{key:"extension",get:function(){return this._extension}}]),i}(),N=Object.freeze({get NodeType(){return c.NodeType},SleetNode:e,SleetValue:i,StringValue:f,BooleanValue:p,NumberValue:_,NullValue:d,IdentifierValue:g,CompareOperatorValue:v,Transformer:y,TransformValue:A,HelperAttribute:b,Helper:m,StaticText:T,DynamicText:C,Attribute:k,Setting:x,AttributeGroup:O,TagExtra:w,Tag:S,Declaration:V});function j(t){var e=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return n(t,{ast:N,ignoreSetting:e})}var H=function(){function s(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:-1,n=arguments[2],r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"\n",u=arguments[4],i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:{},o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:{};l(this,s),this._result=[],this._options=t,this._indent=e,this._indentToken=n||"    ",this._newLineToken=r,this._parent=u,this._factories=i,this._note=o}return r(s,[{key:"register",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){e._factories[t.type]||(e._factories[t.type]=[]),e._factories[t.type].unshift(t)})}},{key:"remove",value:function(e){this._factories[e.type]&&(this._factories[e.type]=this._factories[e.type].filter(function(t){return t!==e}))}},{key:"replace",value:function(t,e){if(t.type===e.type&&this._factories[t.type]){var n=this._factories[t.type].indexOf(t);-1!==n&&(this._factories[t.type][n]=e)}}},{key:"create",value:function(t,e){var n=this._factories[t.type];if(n){for(var r=void 0,u=0;!r&&u<n.length;)r=n[u].create(t,e),u++;return r}}},{key:"_setHaveIndent",value:function(t){this._parent&&(this._parent._haveIndent=t,this._parent._setHaveIndent(t))}},{key:"indent",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;if(!this.haveContent())return this;for(var e="",n=0;n<this._indent+t;n++)e+=this._indentToken;return this._result.push(e),this._setHaveIndent(!0),this}},{key:"mergeUp",value:function(){this._parent&&(this._parent._result=this._parent._result.concat(this._result))}},{key:"push",value:function(t){return this._result.push(t),this}},{key:"pop",value:function(){return this._result.pop(),this}},{key:"eol",value:function(){return this.haveContent()&&this._result.push(this._newLineToken),this}},{key:"sub",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return new s(this._options,t+this._indent+1,this._indentToken,this._newLineToken,this,this._factories,this._note)}},{key:"haveContent",value:function(){return this._parent&&this._parent.haveContent()||0!==this._result.length}},{key:"getOutput",value:function(){return this._parent||this._result.slice(-1)[0]!==this._newLineToken&&this.eol(),this._result.join("")}},{key:"compile",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=this.create(t,e);if(!r)return null;var u=this.sub(n);return r.compile(u),u}},{key:"compileUp",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=this.compile(t,e,n);return r&&r.mergeUp(),r}},{key:"options",get:function(){return this._options}},{key:"note",get:function(){return this._note}},{key:"haveIndent",get:function(){return this._haveIndent}}]),s}(),P=function(){function e(t){l(this,e),this.items=t||[]}return r(e,[{key:"last",value:function(t){if(!t)return this.items[this.items.length-1];for(var e=this.items.length-1;0<=e;e--)if(this.items[e].node.type===t)return this.items[e]}},{key:"concat",value:function(t){return new e(Array.isArray(t)?this.items.concat(t.map(function(t){return{node:t,note:{}}})):this.items.concat({node:t,note:{}}))}}]),e}();c.Context=H,c.parse=j,c.compile=function(t,e){var n=j(t,!1!==e.ignoreSetting);if(e.compile)return e.compile(n,e);var r="";n.declaration&&(r=n.declaration.name),!r&&e.defaultPlugin&&(r=e.defaultPlugin),r&&"string"==typeof r&&("sleet-"===r.slice(0,6)&&(r=r.slice(6)),e.plugins&&e.plugins[r]&&(r=e.plugins[r])),r||(r="html"),r&&"string"==typeof r&&(r=require("sleet-"+r).plugin);var u=new H(e,0,n.indent,e.newLineToken||"\n"),i=r;return i.prepare&&i.prepare(u),i.compile(n,e,u)},c.AbstractCompiler=function t(e,n){l(this,t),this.node=e,this.stack=n.concat(e)},c.SleetStack=P,c.SleetNode=e,c.SleetValue=i,c.StringValue=f,c.BooleanValue=p,c.NumberValue=_,c.NullValue=d,c.IdentifierValue=g,c.CompareOperatorValue=v,c.Transformer=y,c.TransformValue=A,c.HelperAttribute=b,c.Helper=m,c.StaticText=T,c.DynamicText=C,c.Attribute=k,c.Setting=x,c.AttributeGroup=O,c.TagExtra=w,c.Tag=S,c.Declaration=V,Object.defineProperty(c,"__esModule",{value:!0})});
//# sourceMappingURL=sleet.min.js.map
