var Coffee,Comment,Context,Doctype,Echo,EmptyTag,Include,Markdown,Predict,Tag,Text,Transformer,Uglify,compile,defaultTags,emptyTags,parser;parser=require("./parser"),Context=require("./context").Context,Tag=require("./tags/tag").Tag,EmptyTag=require("./tags/empty-tag").EmptyTag,Predict=require("./tags/predict").Predict,Doctype=require("./tags/doctype").Doctype,Include=require("./tags/include").Include,Coffee=require("./tags/transformers/coffee").Coffee,Uglify=require("./tags/transformers/uglify").Uglify,Markdown=require("./tags/transformers/markdown").Markdown,Transformer=require("./tags/transformers/transformer").Transformer,Comment=require("./tags/comment").Comment,Text=require("./tags/text").Text,Echo=require("./tags/echo").Echo,emptyTags=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],defaultTags={doctype:Doctype,coffee:Coffee,uglify:Uglify,markdown:Markdown,"[COMMENT]":Comment,"@include":Include,"[TEXT]":Text,echo:Echo},compile=function(e,r){var t,a,o,n,g,s,i,c,m,f,u,d;null==r&&(r={});try{c=parser.parse(e),u=c.tags,n=c.indent}catch(T){throw a=T,a instanceof parser.SyntaxError?new Error(a.message+" [line: "+a.line+", column: "+a.column+"]"):a}for(t=r.context||new Context,t.indentToken=n,t.options=r,o=0,i=emptyTags.length;i>o;o++)g=emptyTags[o],t.registerTag(g,EmptyTag);for(s in defaultTags)d=defaultTags[s],t.registerTag(s,d);m=r.tags||{};for(s in m)d=m[s],t.registerTag(s,d);f=r.predicts||{};for(s in f)d=f[s],t.registerPredict(s,d);return r.defaultTag&&t.setDefaultTag(r.defaultTag),r.defaultPredict&&t.setDefaultPredict(r.defaultPredict),t.generate(u),t.getOutput()},module.exports={compile:compile,Tag:Tag,EmptyTag:EmptyTag,Predict:Predict,Transformer:Transformer};