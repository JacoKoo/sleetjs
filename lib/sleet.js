var AtIeif,BlockDefinition,BlockReference,Coffee,Comment,Context,Doctype,Echo,EmptyTag,Ieif,Include,Markdown,Predict,Tag,Text,Transformer,Uglify,compile,createContext,defaultTags,emptyTags,parser;parser=require("./parser"),Context=require("./context").Context,Tag=require("./tags/tag").Tag,EmptyTag=require("./tags/empty-tag").EmptyTag,Predict=require("./tags/predict").Predict,Doctype=require("./tags/doctype").Doctype,Include=require("./tags/include").Include,Coffee=require("./tags/transformers/coffee").Coffee,Uglify=require("./tags/transformers/uglify").Uglify,Markdown=require("./tags/transformers/markdown").Markdown,Transformer=require("./tags/transformers/transformer").Transformer,Comment=require("./tags/comment").Comment,Text=require("./tags/text").Text,Echo=require("./tags/echo").Echo,Ieif=require("./tags/ieif").Ieif,AtIeif=require("./tags/at-ieif").AtIeif,BlockDefinition=require("./tags/block-def").BlockDefinition,BlockReference=require("./tags/block-ref").BlockReference,emptyTags=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],defaultTags={doctype:Doctype,coffee:Coffee,uglify:Uglify,markdown:Markdown,"[COMMENT]":Comment,"@include":Include,"[TEXT]":Text,echo:Echo,ieif:Ieif,"@ieif":AtIeif,block:BlockReference,"@block":BlockDefinition},createContext=function(e){var t,r,o,i,a,n,c,f;for(t=new Context(e),r=0,a=emptyTags.length;a>r;r++)o=emptyTags[r],t.registerTag(o,EmptyTag);for(i in defaultTags)f=defaultTags[i],t.registerTag(i,f);n=e.tags||{};for(i in n)f=n[i],t.registerTag(i,f);c=e.predicts||{};for(i in c)f=c[i],t.registerPredict(i,f);return e.defaultTag&&t.setDefaultTag(e.defaultTag),e.defaultPredict&&t.setDefaultPredict(e.defaultPredict),t},compile=function(e,t){var r,o,i,a,n,c,f,s,g,l,u;null==t&&(t={});try{l=parser.parse(e),u=l.tags,c=l.indent,o=l.declaration}catch(m){throw i=m,i instanceof parser.SyntaxError?new Error(i.message+" [line: "+i.line+", column: "+i.column+"]"):i}return r=createContext(t,c),o&&(s=o.name,a=o.ext,g=o.options,t[s]&&t[s].overrideContext?r=t[s].overrideContext(r,t,g):"sleet-"===s.slice(0,6)?(f=require(s),r=f.overrideContext(r,t,g),n=f.getDefaultExtension()):"sleet"!==s&&(f=require("sleet-"+s),r=f.overrideContext(r,t,g),n=f.getDefaultExtension()),t[s]&&t[s].getDefaultExtension&&(n=t[s].getDefaultExtension())),r.indentToken=c,r.generate(u),{content:r.getOutput(),extension:a||n||t.extension||"html"}},module.exports={compile:compile,Tag:Tag,EmptyTag:EmptyTag,Predict:Predict,Transformer:Transformer,Echo:Echo,BlockDefinition:BlockDefinition,BlockReference:BlockReference};