var AtIeif,BlockDefinition,BlockReference,Coffee,Comment,Context,Doctype,Echo,EmptyTag,Ieif,Include,Markdown,Predict,Tag,Text,Transformer,Uglify,compile,defaultTags,emptyTags,parser;parser=require("./parser"),Context=require("./context").Context,Tag=require("./tags/tag").Tag,EmptyTag=require("./tags/empty-tag").EmptyTag,Predict=require("./tags/predict").Predict,Doctype=require("./tags/doctype").Doctype,Include=require("./tags/include").Include,Coffee=require("./tags/transformers/coffee").Coffee,Uglify=require("./tags/transformers/uglify").Uglify,Markdown=require("./tags/transformers/markdown").Markdown,Transformer=require("./tags/transformers/transformer").Transformer,Comment=require("./tags/comment").Comment,Text=require("./tags/text").Text,Echo=require("./tags/echo").Echo,Ieif=require("./tags/ieif").Ieif,AtIeif=require("./tags/at-ieif").AtIeif,BlockDefinition=require("./tags/block-def").BlockDefinition,BlockReference=require("./tags/block-ref").BlockReference,emptyTags=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],defaultTags={doctype:Doctype,coffee:Coffee,uglify:Uglify,markdown:Markdown,"[COMMENT]":Comment,"@include":Include,"[TEXT]":Text,echo:Echo,ieif:Ieif,"@ieif":AtIeif,block:BlockReference,"@block":BlockDefinition},compile=function(e,r){var t,a,i,o,n,c,f,g,s,l,m,u;null==r&&(r={});try{g=parser.parse(e),m=g.tags,o=g.indent}catch(d){throw a=d,a instanceof parser.SyntaxError?new Error(a.message+" [line: "+a.line+", column: "+a.column+"]"):a}for(t=r.context||new Context,t.indentToken=o,t.options=r,i=0,f=emptyTags.length;f>i;i++)n=emptyTags[i],t.registerTag(n,EmptyTag);for(c in defaultTags)u=defaultTags[c],t.registerTag(c,u);s=r.tags||{};for(c in s)u=s[c],t.registerTag(c,u);l=r.predicts||{};for(c in l)u=l[c],t.registerPredict(c,u);return r.defaultTag&&t.setDefaultTag(r.defaultTag),r.defaultPredict&&t.setDefaultPredict(r.defaultPredict),t.generate(m),t.getOutput()},module.exports={compile:compile,Tag:Tag,EmptyTag:EmptyTag,Predict:Predict,Transformer:Transformer,Echo:Echo};